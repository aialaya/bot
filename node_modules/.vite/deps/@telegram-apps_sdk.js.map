{
  "version": 3,
  "sources": ["../../@telegram-apps/transformers/dist/index.js", "../../@telegram-apps/sdk/src/classnames/classNames.ts", "../../@telegram-apps/sdk/src/classnames/mergeClassNames.ts", "../../@telegram-apps/bridge/dist/index.js", "../../@telegram-apps/navigation/dist/index.js", "../../@telegram-apps/signals/dist/index.js", "../../@telegram-apps/sdk/src/scopes/globals.ts", "../../@telegram-apps/sdk/src/scopes/toolkit/createIsSupported.ts", "../../@telegram-apps/sdk/src/errors.ts", "../../@telegram-apps/sdk/src/utils/isSSR.ts", "../../@telegram-apps/sdk/src/scopes/toolkit/wrapSafe.ts", "../../@telegram-apps/sdk/src/scopes/toolkit/createWrapSafe.ts", "../../@telegram-apps/sdk/src/scopes/toolkit/createWrapComplete.ts", "../../@telegram-apps/sdk/src/scopes/toolkit/createWrapSupported.ts", "../../@telegram-apps/sdk/src/scopes/components/back-button/back-button.ts", "../../@telegram-apps/sdk/src/scopes/createMountFn.ts", "../../@telegram-apps/sdk/src/scopes/toolkit/createWrapBasic.ts", "../../@telegram-apps/sdk/src/scopes/components/biometry/signals.ts", "../../@telegram-apps/sdk/src/scopes/components/biometry/eventToState.ts", "../../@telegram-apps/sdk/src/scopes/components/biometry/requestBiometry.ts", "../../@telegram-apps/sdk/src/scopes/components/biometry/methods.ts", "../../@telegram-apps/sdk/src/scopes/toolkit/createWrapMounted.ts", "../../@telegram-apps/sdk/src/scopes/components/closing-behavior/closing-behavior.ts", "../../@telegram-apps/sdk/src/scopes/components/cloud-storage/cloud-storage.ts", "../../@telegram-apps/sdk/src/scopes/components/haptic-feedback/haptic-feedback.ts", "../../@telegram-apps/sdk/src/scopes/components/init-data/init-data.ts", "../../@telegram-apps/sdk/src/scopes/components/init-data/parseInitData.ts", "../../@telegram-apps/sdk/src/scopes/components/invoice/invoice.ts", "../../@telegram-apps/sdk/src/utils/isColorDark.ts", "../../@telegram-apps/sdk/src/scopes/components/theme-params/signals.ts", "../../@telegram-apps/sdk/src/scopes/components/main-button/signals.ts", "../../@telegram-apps/sdk/src/scopes/components/main-button/methods.ts", "../../@telegram-apps/sdk/src/scopes/toolkit/throwCssVarsBound.ts", "../../@telegram-apps/sdk/src/scopes/components/theme-params/parseThemeParams.ts", "../../@telegram-apps/sdk/src/scopes/components/theme-params/methods.ts", "../../@telegram-apps/sdk/src/scopes/components/mini-app/signals.ts", "../../@telegram-apps/sdk/src/scopes/components/mini-app/methods.ts", "../../@telegram-apps/sdk/src/scopes/components/popup/prepareParams.ts", "../../@telegram-apps/sdk/src/scopes/components/popup/popup.ts", "../../@telegram-apps/sdk/src/scopes/components/qr-scanner/qr-scanner.ts", "../../@telegram-apps/sdk/src/scopes/components/secondary-button/signals.ts", "../../@telegram-apps/sdk/src/scopes/components/secondary-button/methods.ts", "../../@telegram-apps/sdk/src/scopes/components/settings-button/settings-button.ts", "../../@telegram-apps/sdk/src/scopes/components/swipe-behavior/swipe-behavior.ts", "../../@telegram-apps/sdk/src/scopes/components/viewport/signals.ts", "../../@telegram-apps/sdk/src/scopes/components/viewport/requestViewport.ts", "../../@telegram-apps/sdk/src/scopes/components/viewport/methods.ts", "../../@telegram-apps/sdk/src/scopes/utilities/links/openLink.ts", "../../@telegram-apps/sdk/src/scopes/utilities/links/openTelegramLink.ts", "../../@telegram-apps/sdk/src/scopes/utilities/links/shareURL.ts", "../../@telegram-apps/sdk/src/scopes/utilities/privacy/requestPhoneAccess.ts", "../../@telegram-apps/sdk/src/scopes/utilities/privacy/requestContact.ts", "../../@telegram-apps/sdk/src/scopes/utilities/privacy/requestWriteAccess.ts", "../../@telegram-apps/sdk/src/scopes/utilities/uncategorized/getCurrentTime.ts", "../../@telegram-apps/sdk/src/scopes/utilities/uncategorized/readTextFromClipboard.ts", "../../@telegram-apps/sdk/src/scopes/utilities/uncategorized/sendData.ts", "../../@telegram-apps/sdk/src/scopes/utilities/uncategorized/shareStory.ts", "../../@telegram-apps/sdk/src/scopes/utilities/uncategorized/switchInlineQuery.ts", "../../@telegram-apps/sdk/src/utils/safeCall.ts", "../../@telegram-apps/sdk/src/init.ts"],
  "sourcesContent": ["class i extends Error {\n  constructor(e, r, a) {\n    super(\n      typeof r == \"object\" ? r.message : r || e,\n      {\n        cause: typeof r == \"object\" ? r.cause : a\n      }\n    ), this.type = e, Object.setPrototypeOf(this, i.prototype);\n  }\n}\nfunction b(t) {\n  return t.replace(/[A-Z]/g, (e) => `_${e.toLowerCase()}`);\n}\nfunction E(t) {\n  return t.replace(/_[a-z]/g, (e) => e[1].toUpperCase());\n}\nconst R = \"ERR_INVALID_VALUE\", S = \"ERR_UNEXPECTED_VALUE\", w = \"ERR_UNEXPECTED_TYPE\", h = \"ERR_PARSE\";\nfunction y(t, e) {\n  const r = {};\n  for (const a in t) {\n    const n = t[a];\n    if (!n)\n      continue;\n    let o, c;\n    typeof n == \"function\" ? (o = a, c = n) : [o, c] = n;\n    try {\n      const p = c(e(o));\n      p !== void 0 && (r[a] = p);\n    } catch (p) {\n      throw new i(\n        h,\n        `Parser for \"${a}\" property failed${o === a ? \"\" : `. Source field: \"${o}\"`}`,\n        p\n      );\n    }\n  }\n  return r;\n}\nfunction d(t) {\n  let e = t;\n  if (typeof e == \"string\")\n    try {\n      e = JSON.parse(e);\n    } catch (r) {\n      throw new i(R, { cause: r });\n    }\n  if (typeof e != \"object\" || !e || Array.isArray(e))\n    throw new i(S);\n  return e;\n}\nfunction s(t, e) {\n  return (r) => {\n    const a = (n) => {\n      if (!(r && n === void 0))\n        try {\n          return e(n);\n        } catch (o) {\n          throw new i(h, {\n            message: `\"${t}\" transformer failed to parse the value`,\n            cause: o\n          });\n        }\n    };\n    return /* @__PURE__ */ Object.assign(\n      a,\n      {\n        isValid(n) {\n          try {\n            return a(n), !0;\n          } catch {\n            return !1;\n          }\n        }\n      }\n    );\n  };\n}\nfunction l(t, e) {\n  return s(e || \"object\", (r) => {\n    const a = d(r);\n    return y(t, (n) => a[n]);\n  });\n}\nfunction f(t) {\n  throw new i(w, `Unexpected value received: ${JSON.stringify(t)}`);\n}\nconst A = s(\"boolean\", (t) => {\n  if (typeof t == \"boolean\")\n    return t;\n  const e = String(t);\n  if (e === \"1\" || e === \"true\")\n    return !0;\n  if (e === \"0\" || e === \"false\")\n    return !1;\n  f(t);\n}), u = s(\"string\", (t) => {\n  if (typeof t == \"string\" || typeof t == \"number\")\n    return t.toString();\n  f(t);\n}), g = s(\"number\", (t) => {\n  if (typeof t == \"number\")\n    return t;\n  if (typeof t == \"string\") {\n    const e = Number(t);\n    if (!Number.isNaN(e))\n      return e;\n  }\n  f(t);\n}), D = s(\"date\", (t) => t instanceof Date ? t : new Date(g()(t) * 1e3));\nfunction P(t, e) {\n  return s(e || \"searchParams\", (r) => {\n    typeof r != \"string\" && !(r instanceof URLSearchParams) && f(r);\n    const a = typeof r == \"string\" ? new URLSearchParams(r) : r;\n    return y(t, (n) => {\n      const o = a.get(n);\n      return o === null ? void 0 : o;\n    });\n  });\n}\nfunction m(t) {\n  for (const e in t)\n    t[e] = [b(e), t[e]];\n  return t;\n}\nconst U = (t) => {\n  const e = g(), r = g(!0), a = u(), n = u(!0), o = A(!0), c = l(m({\n    addedToAttachmentMenu: o,\n    allowsWriteToPm: o,\n    firstName: a,\n    id: e,\n    isBot: o,\n    isPremium: o,\n    languageCode: n,\n    lastName: n,\n    photoUrl: n,\n    username: n\n  }), \"User\")(!0);\n  return P(\n    m({\n      authDate: D(),\n      canSendAfter: r,\n      chat: l(\n        m({\n          id: e,\n          type: a,\n          title: a,\n          photoUrl: n,\n          username: n\n        }),\n        \"Chat\"\n      )(!0),\n      chatInstance: n,\n      chatType: n,\n      hash: a,\n      queryId: n,\n      receiver: c,\n      startParam: n,\n      user: c\n    }),\n    \"initData\"\n  )(t);\n};\nfunction N(t) {\n  return /^#[\\da-f]{6}$/i.test(t);\n}\nfunction O(t) {\n  return /^#[\\da-f]{3}$/i.test(t);\n}\nfunction W(t) {\n  const e = t.replace(/\\s/g, \"\").toLowerCase();\n  if (N(e))\n    return e;\n  if (O(e)) {\n    let a = \"#\";\n    for (let n = 0; n < 3; n += 1)\n      a += e[1 + n].repeat(2);\n    return a;\n  }\n  const r = e.match(/^rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)$/) || e.match(/^rgba\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3}),\\d{1,3}\\)$/);\n  if (!r)\n    throw new Error(`Value \"${t}\" does not satisfy any of known RGB formats.`);\n  return r.slice(1).reduce((a, n) => {\n    const o = parseInt(n, 10).toString(16);\n    return a + (o.length === 1 ? \"0\" : \"\") + o;\n  }, \"#\");\n}\nconst _ = s(\"rgb\", (t) => W(u()(t))), T = s(\n  \"themeParams\",\n  (t) => {\n    const e = _(!0);\n    return Object.entries(d(t)).reduce((r, [a, n]) => (r[E(a)] = e(n), r), {});\n  }\n);\n// @__NO_SIDE_EFFECTS__\nfunction V(t) {\n  return JSON.stringify(\n    Object.fromEntries(\n      Object.entries(t).map(([e, r]) => [b(e), r])\n    )\n  );\n}\nconst $ = (t) => {\n  const e = u(), r = u(!0), a = A(!0);\n  return P({\n    botInline: [\"tgWebAppBotInline\", a],\n    initData: [\"tgWebAppData\", U(!0)],\n    initDataRaw: [\"tgWebAppData\", r],\n    platform: [\"tgWebAppPlatform\", e],\n    showSettings: [\"tgWebAppShowSettings\", a],\n    startParam: [\"tgWebAppStartParam\", r],\n    themeParams: [\"tgWebAppThemeParams\", T()],\n    version: [\"tgWebAppVersion\", e]\n  }, \"launchParams\")(t);\n};\n// @__NO_SIDE_EFFECTS__\nfunction j(t) {\n  const { initDataRaw: e, startParam: r, showSettings: a, botInline: n } = t, o = new URLSearchParams();\n  return o.set(\"tgWebAppPlatform\", t.platform), o.set(\"tgWebAppThemeParams\", /* @__PURE__ */ V(t.themeParams)), o.set(\"tgWebAppVersion\", t.version), e && o.set(\"tgWebAppData\", e), r && o.set(\"tgWebAppStartParam\", r), typeof a == \"boolean\" && o.set(\"tgWebAppShowSettings\", a ? \"1\" : \"0\"), typeof n == \"boolean\" && o.set(\"tgWebAppBotInline\", n ? \"1\" : \"0\"), o.toString();\n}\nconst L = l({\n  eventType: u(),\n  eventData: (t) => t\n}, \"miniAppsMessage\");\nfunction I(t, e) {\n  return s(e || \"array\", (r) => {\n    let a;\n    if (Array.isArray(r))\n      a = r;\n    else if (typeof r == \"string\")\n      try {\n        const n = JSON.parse(r);\n        Array.isArray(n) && (a = n);\n      } catch {\n      }\n    return a || f(r), a.map(t);\n  });\n}\nconst C = s(\"fn\", (t) => {\n  if (typeof t == \"function\")\n    return t;\n  f(t);\n});\nfunction B(t) {\n  return !!t && typeof t == \"object\" && !Array.isArray(t);\n}\nexport {\n  R as ERR_INVALID_VALUE,\n  h as ERR_PARSE,\n  w as ERR_UNEXPECTED_TYPE,\n  S as ERR_UNEXPECTED_VALUE,\n  I as array,\n  A as boolean,\n  s as createTransformerGen,\n  D as date,\n  C as fn,\n  U as initData,\n  N as isRGB,\n  O as isRGBShort,\n  B as isRecord,\n  $ as launchParams,\n  L as miniAppsMessage,\n  g as number,\n  l as object,\n  _ as rgb,\n  P as searchParams,\n  j as serializeLaunchParams,\n  V as serializeThemeParams,\n  u as string,\n  T as themeParams,\n  W as toRGB,\n  d as toRecord\n};\n//# sourceMappingURL=index.js.map\n", "import { isRecord } from '@telegram-apps/transformers';\n\n/**\n * Function which joins passed values with space following these rules:\n * 1. If value is non-empty string, it will be added to output.\n * 2. If value is object, only those keys will be added, which values are truthy.\n * 3. If value is array, classNames will be called with this value spread.\n * 4. All other values are ignored.\n *\n * You can find this function to similar one from the package {@link https://www.npmjs.com/package/classnames|classnames}.\n * @param values - values array.\n * @returns Final class name.\n */\nexport function classNames(...values: any[]): string {\n  return values\n    .map((value) => {\n      if (typeof value === 'string') {\n        return value;\n      }\n\n      if (isRecord(value)) {\n        return classNames(Object.entries(value).map((entry) => entry[1] && entry[0]));\n      }\n\n      if (Array.isArray(value)) {\n        return classNames(...value);\n      }\n    })\n    .filter(Boolean)\n    .join(' ');\n}\n", "import { isRecord } from '@telegram-apps/transformers';\n\nimport { classNames } from './classNames.js';\n\ntype UnionStringKeys<U> = U extends U\n  ? { [K in keyof U]-?: U[K] extends string | undefined ? K : never }[keyof U]\n  : never;\n\ntype UnionRequiredKeys<U> = U extends U\n  ? { [K in UnionStringKeys<U>]: ({} extends Pick<U, K> ? never : K) }[UnionStringKeys<U>]\n  : never;\n\ntype UnionOptionalKeys<U> = Exclude<UnionStringKeys<U>, UnionRequiredKeys<U>>;\n\nexport type MergeClassNames<Tuple extends any[]> =\n// Removes all types from union that will be ignored by the mergeClassNames function.\n  Exclude<Tuple[number], number | string | null | undefined | any[] | boolean> extends infer Union\n    ?\n    & { [K in UnionRequiredKeys<Union>]: string; }\n    & { [K in UnionOptionalKeys<Union>]?: string; }\n    : never;\n\n/**\n * Merges two sets of classnames.\n *\n * The function expects to pass an array of objects with values that could be passed to\n * the `classNames` function.\n * @returns An object with keys from all objects with merged values.\n * @see classNames\n */\nexport function mergeClassNames<T extends any[]>(...partials: T): MergeClassNames<T> {\n  return partials.reduce<MergeClassNames<T>>((acc, partial) => {\n    if (isRecord(partial)) {\n      Object.entries(partial).forEach(([key, value]) => {\n        const className = classNames((acc as any)[key], value);\n        if (className) {\n          (acc as any)[key] = className;\n        }\n      });\n    }\n    return acc;\n  }, {} as MergeClassNames<T>);\n}\n", "let v = class H extends Error {\n  constructor(t, n, r) {\n    super(\n      typeof n == \"object\" ? n.message : n || t,\n      {\n        cause: typeof n == \"object\" ? n.cause : r\n      }\n    ), this.type = t, Object.setPrototypeOf(this, H.prototype);\n  }\n};\nfunction G(e) {\n  return e.replace(/[A-Z]/g, (t) => `_${t.toLowerCase()}`);\n}\nfunction we(e) {\n  return e.replace(/_[a-z]/g, (t) => t[1].toUpperCase());\n}\nconst he = \"ERR_INVALID_VALUE\", de = \"ERR_UNEXPECTED_VALUE\", me = \"ERR_UNEXPECTED_TYPE\", K = \"ERR_PARSE\";\nfunction V(e, t) {\n  const n = {};\n  for (const r in e) {\n    const o = e[r];\n    if (!o)\n      continue;\n    let s, a;\n    typeof o == \"function\" ? (s = r, a = o) : [s, a] = o;\n    try {\n      const i = a(t(s));\n      i !== void 0 && (n[r] = i);\n    } catch (i) {\n      throw new v(\n        K,\n        `Parser for \"${r}\" property failed${s === r ? \"\" : `. Source field: \"${s}\"`}`,\n        i\n      );\n    }\n  }\n  return n;\n}\nfunction Z(e) {\n  let t = e;\n  if (typeof t == \"string\")\n    try {\n      t = JSON.parse(t);\n    } catch (n) {\n      throw new v(he, { cause: n });\n    }\n  if (typeof t != \"object\" || !t || Array.isArray(t))\n    throw new v(de);\n  return t;\n}\nfunction g(e, t) {\n  return (n) => {\n    const r = (o) => {\n      if (!(n && o === void 0))\n        try {\n          return t(o);\n        } catch (s) {\n          throw new v(K, {\n            message: `\"${e}\" transformer failed to parse the value`,\n            cause: s\n          });\n        }\n    };\n    return /* @__PURE__ */ Object.assign(\n      r,\n      {\n        isValid(o) {\n          try {\n            return r(o), !0;\n          } catch {\n            return !1;\n          }\n        }\n      }\n    );\n  };\n}\nfunction l(e, t) {\n  return g(t || \"object\", (n) => {\n    const r = Z(n);\n    return V(e, (o) => r[o]);\n  });\n}\nfunction R(e) {\n  throw new v(me, `Unexpected value received: ${JSON.stringify(e)}`);\n}\nconst $ = g(\"boolean\", (e) => {\n  if (typeof e == \"boolean\")\n    return e;\n  const t = String(e);\n  if (t === \"1\" || t === \"true\")\n    return !0;\n  if (t === \"0\" || t === \"false\")\n    return !1;\n  R(e);\n}), _ = g(\"string\", (e) => {\n  if (typeof e == \"string\" || typeof e == \"number\")\n    return e.toString();\n  R(e);\n}), P = g(\"number\", (e) => {\n  if (typeof e == \"number\")\n    return e;\n  if (typeof e == \"string\") {\n    const t = Number(e);\n    if (!Number.isNaN(t))\n      return t;\n  }\n  R(e);\n}), Ee = g(\"date\", (e) => e instanceof Date ? e : new Date(P()(e) * 1e3));\nfunction z(e, t) {\n  return g(t || \"searchParams\", (n) => {\n    typeof n != \"string\" && !(n instanceof URLSearchParams) && R(n);\n    const r = typeof n == \"string\" ? new URLSearchParams(n) : n;\n    return V(e, (o) => {\n      const s = r.get(o);\n      return s === null ? void 0 : s;\n    });\n  });\n}\nfunction U(e) {\n  for (const t in e)\n    e[t] = [G(t), e[t]];\n  return e;\n}\nconst ye = (e) => {\n  const t = P(), n = P(!0), r = _(), o = _(!0), s = $(!0), a = l(U({\n    addedToAttachmentMenu: s,\n    allowsWriteToPm: s,\n    firstName: r,\n    id: t,\n    isBot: s,\n    isPremium: s,\n    languageCode: o,\n    lastName: o,\n    photoUrl: o,\n    username: o\n  }), \"User\")(!0);\n  return z(\n    U({\n      authDate: Ee(),\n      canSendAfter: n,\n      chat: l(\n        U({\n          id: t,\n          type: r,\n          title: r,\n          photoUrl: o,\n          username: o\n        }),\n        \"Chat\"\n      )(!0),\n      chatInstance: o,\n      chatType: o,\n      hash: r,\n      queryId: o,\n      receiver: a,\n      startParam: o,\n      user: a\n    }),\n    \"initData\"\n  )(e);\n};\nfunction ve(e) {\n  return /^#[\\da-f]{6}$/i.test(e);\n}\nfunction Pe(e) {\n  return /^#[\\da-f]{3}$/i.test(e);\n}\nfunction Re(e) {\n  const t = e.replace(/\\s/g, \"\").toLowerCase();\n  if (ve(t))\n    return t;\n  if (Pe(t)) {\n    let r = \"#\";\n    for (let o = 0; o < 3; o += 1)\n      r += t[1 + o].repeat(2);\n    return r;\n  }\n  const n = t.match(/^rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)$/) || t.match(/^rgba\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3}),\\d{1,3}\\)$/);\n  if (!n)\n    throw new Error(`Value \"${e}\" does not satisfy any of known RGB formats.`);\n  return n.slice(1).reduce((r, o) => {\n    const s = parseInt(o, 10).toString(16);\n    return r + (s.length === 1 ? \"0\" : \"\") + s;\n  }, \"#\");\n}\nconst Te = g(\"rgb\", (e) => Re(_()(e))), Se = g(\n  \"themeParams\",\n  (e) => {\n    const t = Te(!0);\n    return Object.entries(Z(e)).reduce((n, [r, o]) => (n[we(r)] = t(o), n), {});\n  }\n);\n// @__NO_SIDE_EFFECTS__\nfunction X(e) {\n  return JSON.stringify(\n    Object.fromEntries(\n      Object.entries(e).map(([t, n]) => [G(t), n])\n    )\n  );\n}\nconst Ae = (e) => {\n  const t = _(), n = _(!0), r = $(!0);\n  return z({\n    botInline: [\"tgWebAppBotInline\", r],\n    initData: [\"tgWebAppData\", ye(!0)],\n    initDataRaw: [\"tgWebAppData\", n],\n    platform: [\"tgWebAppPlatform\", t],\n    showSettings: [\"tgWebAppShowSettings\", r],\n    startParam: [\"tgWebAppStartParam\", n],\n    themeParams: [\"tgWebAppThemeParams\", Se()],\n    version: [\"tgWebAppVersion\", t]\n  }, \"launchParams\")(e);\n};\n// @__NO_SIDE_EFFECTS__\nfunction $e(e) {\n  const { initDataRaw: t, startParam: n, showSettings: r, botInline: o } = e, s = new URLSearchParams();\n  return s.set(\"tgWebAppPlatform\", e.platform), s.set(\"tgWebAppThemeParams\", /* @__PURE__ */ X(e.themeParams)), s.set(\"tgWebAppVersion\", e.version), t && s.set(\"tgWebAppData\", t), n && s.set(\"tgWebAppStartParam\", n), typeof r == \"boolean\" && s.set(\"tgWebAppShowSettings\", r ? \"1\" : \"0\"), typeof o == \"boolean\" && s.set(\"tgWebAppBotInline\", o ? \"1\" : \"0\"), s.toString();\n}\nconst Y = l({\n  eventType: _(),\n  eventData: (e) => e\n}, \"miniAppsMessage\"), Q = g(\"fn\", (e) => {\n  if (typeof e == \"function\")\n    return e;\n  R(e);\n});\nfunction Ne(e) {\n  return !!e && typeof e == \"object\" && !Array.isArray(e);\n}\nconst Ce = l({\n  TelegramWebviewProxy: l({ postEvent: Q() })()\n});\nfunction ee(e) {\n  return Ce().isValid(e);\n}\nfunction De() {\n  try {\n    return window.self !== window.top;\n  } catch {\n    return !0;\n  }\n}\nvar Ue = Object.defineProperty, je = (e, t, n) => t in e ? Ue(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n, te = (e, t, n) => je(e, typeof t != \"symbol\" ? t + \"\" : t, n);\nclass b extends Error {\n  constructor(t, n, r) {\n    super(\n      typeof n == \"object\" ? n.message : n || t,\n      {\n        cause: typeof n == \"object\" ? n.cause : r\n      }\n    ), this.type = t, Object.setPrototypeOf(this, b.prototype);\n  }\n}\nfunction x(e, t, n) {\n  return e.addEventListener(t, n), () => e.removeEventListener(t, n);\n}\nfunction L(...e) {\n  const t = e.flat(1);\n  return [\n    t.push.bind(t),\n    () => {\n      t.forEach((n) => {\n        n();\n      });\n    }\n  ];\n}\nfunction xe(e, t) {\n  return e instanceof b && e.type === t;\n}\nfunction W(e) {\n  return (t) => xe(t, e);\n}\nconst ne = \"ERR_ABORTED\", re = \"ERR_CANCELED\", oe = \"ERR_TIMED_OUT\";\nfunction M(e) {\n  return new b(ne, { cause: e });\n}\nconst ot = W(oe), st = W(ne), at = W(re);\nfunction q(e, t) {\n  return e.reject = t.reject, e;\n}\nclass w extends Promise {\n  constructor(t, n) {\n    let r, o;\n    typeof t == \"function\" ? (r = t, o = n) : o = t;\n    let s, a;\n    super((i, c) => {\n      o || (o = {});\n      const { abortSignal: u } = o;\n      if (u && u.aborted)\n        return c(M(u.reason));\n      const [f, h] = L(), d = (m) => (...ge) => (h(), m(...ge)), T = new AbortController(), { signal: S } = T;\n      a = d((m) => {\n        T.abort(m), c(m);\n      }), s = d(i), u && f(\n        x(u, \"abort\", () => {\n          a(M(u.reason));\n        })\n      );\n      const { timeout: D } = o;\n      if (D) {\n        const m = setTimeout(() => {\n          a(new b(oe, `Timeout reached: ${D}ms`));\n        }, D);\n        f(() => {\n          clearTimeout(m);\n        });\n      }\n      r && r(s, a, S);\n    }), te(this, \"reject\"), this.reject = a;\n  }\n  /**\n   * Creates a new BetterPromise instance using executor, resolving promise when a result\n   * was returned.\n   * @param fn - function returning promise result.\n   * @param options - additional options.\n   */\n  static withFn(t, n) {\n    return new w((r, o, s) => {\n      try {\n        const a = t(s);\n        return a instanceof Promise ? a.then(r, o) : r(a);\n      } catch (a) {\n        o(a);\n      }\n    }, n);\n  }\n  /**\n   * @see Promise.resolve\n   */\n  static resolve(t) {\n    return new w((n) => {\n      n(t);\n    });\n  }\n  /**\n   * @see Promise.reject\n   */\n  static reject(t) {\n    return new w((n, r) => {\n      r(t);\n    });\n  }\n  /**\n   * Cancels the promise execution.\n   */\n  cancel() {\n    this.reject(new b(re));\n  }\n  /**\n   * @see Promise.catch\n   */\n  catch(t) {\n    return this.then(void 0, t);\n  }\n  /**\n   * @see Promise.finally\n   */\n  finally(t) {\n    return q(super.finally(t), this);\n  }\n  /**\n   * @see Promise.then\n   */\n  then(t, n) {\n    return q(super.then(t, n), this);\n  }\n}\nfunction F(e, t) {\n  return e.resolve = t.resolve, e;\n}\nclass A extends w {\n  constructor(t, n) {\n    let r, o;\n    typeof t == \"function\" ? (r = t, o = n) : o = t;\n    let s;\n    super((a, i, c) => {\n      s = a, r && r(a, i, c);\n    }, o), te(this, \"resolve\"), this.resolve = s;\n  }\n  /**\n   * Creates a new EnhancedPromise instance using executor, resolving promise when a result\n   * was returned.\n   * @param fn - function returning promise result.\n   * @param options - additional options.\n   */\n  static withFn(t, n) {\n    return new A(\n      (r, o, s) => w.withFn(t, { abortSignal: s }).then(r, o),\n      n\n    );\n  }\n  /**\n   * @see Promise.resolve\n   */\n  static resolve(t) {\n    return new A((n) => {\n      n(t);\n    });\n  }\n  /**\n   * @see Promise.reject\n   */\n  static reject(t) {\n    return new A((n, r) => {\n      r(t);\n    });\n  }\n  /**\n   * @see Promise.catch\n   */\n  catch(t) {\n    return this.then(void 0, t);\n  }\n  /**\n   * @see Promise.finally\n   */\n  finally(t) {\n    return F(super.finally(t), this);\n  }\n  /**\n   * @see Promise.then\n   */\n  then(t, n) {\n    return F(super.then(t, n), this);\n  }\n}\nfunction it(e, t) {\n  return new w((n) => {\n    setTimeout(n, e);\n  }, { abortSignal: t });\n}\nfunction se(e) {\n  return `tapps/${e}`;\n}\nfunction ke(e, t) {\n  sessionStorage.setItem(se(e), JSON.stringify(t));\n}\nfunction Le(e) {\n  const t = sessionStorage.getItem(se(e));\n  try {\n    return t ? JSON.parse(t) : void 0;\n  } catch {\n  }\n}\nfunction ct(e) {\n  return e.replace(/[A-Z]/g, (t) => `-${t.toLowerCase()}`);\n}\nfunction ut(e) {\n  return e.replace(/[A-Z]/g, (t) => `_${t.toLowerCase()}`);\n}\nfunction pt(e) {\n  return e.replace(/_[a-z]/g, (t) => t[1].toUpperCase());\n}\n// @__NO_SIDE_EFFECTS__\nfunction We(e, t) {\n  t || (t = {});\n  const {\n    textColor: n,\n    bgColor: r,\n    shouldLog: o = !0\n  } = t;\n  function s(a, ...i) {\n    if (!o || typeof o == \"function\" && !o())\n      return;\n    const c = \"font-weight:bold;padding:0 5px;border-radius:5px\";\n    console[a](\n      `%c${Intl.DateTimeFormat(\"en-GB\", {\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n        second: \"2-digit\",\n        fractionalSecondDigits: 3,\n        timeZone: \"UTC\"\n      }).format(/* @__PURE__ */ new Date())}%c / %c${e}`,\n      `${c};background-color: lightblue;color:black`,\n      \"\",\n      `${c};${n ? `color:${n};` : \"\"}${r ? `background-color:${r}` : \"\"}`,\n      ...i\n    );\n  }\n  return [\n    function(...a) {\n      s(\"log\", ...a);\n    },\n    function(...a) {\n      s(\"error\", ...a);\n    }\n  ];\n}\nfunction ft(e, t) {\n  document.documentElement.style.setProperty(e, t);\n}\nfunction _t(e) {\n  document.documentElement.style.removeProperty(e);\n}\nfunction Oe(e, t) {\n  t();\n}\n// @__NO_SIDE_EFFECTS__\nfunction E(e, t) {\n  t || (t = {});\n  const n = t.equals || Object.is;\n  let r = [], o = e;\n  const s = (u) => {\n    if (!n(o, u)) {\n      const f = o;\n      o = u, Oe(c, () => {\n        [...r].forEach(([h, d]) => {\n          h(u, f), d && i(h, !0);\n        });\n      });\n    }\n  };\n  function a(u) {\n    const f = typeof u != \"object\" ? { once: u } : u;\n    return {\n      once: f.once || !1,\n      signal: f.signal || !1\n    };\n  }\n  const i = (u, f) => {\n    const h = a(f), d = r.findIndex(([T, S]) => T === u && S.once === h.once && S.signal === h.signal);\n    d >= 0 && r.splice(d, 1);\n  }, c = Object.assign(\n    function() {\n      return Ie(c), o;\n    },\n    {\n      destroy() {\n        r = [];\n      },\n      set: s,\n      reset() {\n        s(e);\n      },\n      sub(u, f) {\n        return r.push([u, a(f)]), () => i(u, f);\n      },\n      unsub: i,\n      unsubAll() {\n        r = r.filter((u) => u[1].signal);\n      }\n    }\n  );\n  return c;\n}\nconst j = [];\nfunction Ie(e) {\n  j.length && j[j.length - 1].add(e);\n}\nconst ae = /* @__PURE__ */ E(!1), [O, Me] = /* @__PURE__ */ We(\"Bridge\", {\n  bgColor: \"#9147ff\",\n  textColor: \"white\",\n  shouldLog: ae\n}), qe = {\n  clipboard_text_received: l({\n    req_id: _(),\n    data: (e) => e === null ? e : _(!0)(e)\n  }, \"clipboard_text_received\"),\n  custom_method_invoked: l({\n    req_id: _(),\n    result: (e) => e,\n    error: _(!0)\n  }, \"custom_method_invoked\"),\n  popup_closed: g(\"popup_closed\", (e) => e ? l({\n    button_id: (t) => t == null ? void 0 : _()(t)\n  })()(e) : {}),\n  viewport_changed: l({\n    height: P(),\n    width: (e) => e == null ? window.innerWidth : P()(e),\n    is_state_stable: $(),\n    is_expanded: $()\n  }, \"viewport_changed\")\n};\nfunction Fe(e) {\n  const t = window, [, n] = L(\n    // Add \"resize\" event listener to make sure, we always have fresh viewport information.\n    // The desktop version of Telegram is sometimes not sending the \"viewport_changed\"\n    // event. For example, when the Main Button is shown. That's why we should\n    // add our own listener to make sure viewport information is always fresh.\n    // Issue: https://github.com/Telegram-Mini-Apps/telegram-apps/issues/10\n    x(t, \"resize\", () => {\n      e([\"viewport_changed\", {\n        width: window.innerWidth,\n        height: window.innerHeight,\n        is_state_stable: !0,\n        is_expanded: !0\n      }]);\n    }),\n    // Add listener, which handles events sent from the Telegram web application and also events\n    // generated by the local emitEvent function.\n    x(t, \"message\", (r) => {\n      if (r.source !== t.parent)\n        return;\n      let o;\n      try {\n        o = Y()(r.data);\n      } catch {\n        return;\n      }\n      const { eventType: s, eventData: a } = o, i = qe[s];\n      try {\n        const c = i ? i()(a) : a;\n        O(\"Event received:\", c ? { eventType: s, eventData: c } : { eventType: s }), e([s, c]);\n      } catch (c) {\n        Me(\n          [\n            `An error occurred processing the \"${s}\" event from the Telegram application.`,\n            \"Please, file an issue here:\",\n            \"https://github.com/Telegram-Mini-Apps/telegram-apps/issues/new/choose\"\n          ].join(`\n`),\n          o,\n          c\n        );\n      }\n    })\n  );\n  return n;\n}\nconst N = /* @__PURE__ */ E(), C = /* @__PURE__ */ E();\nfunction ie() {\n  return C() || C.set(Fe(N.set)), N;\n}\nconst y = /* @__PURE__ */ E({});\nfunction ce(e) {\n  let t = y()[e];\n  return t || (t = /* @__PURE__ */ E(void 0, {\n    equals() {\n      return !1;\n    }\n  }), ie().sub((n) => {\n    n && n[0] === e && t.set(n[1]);\n  }), y.set({ ...y(), [e]: t })), t;\n}\nfunction Je(e, t, n) {\n  return ce(e).sub(t, n);\n}\nconst Be = \"ERR_METHOD_UNSUPPORTED\", He = \"ERR_RETRIEVE_LP_FAILED\", Ge = \"ERR_METHOD_PARAMETER_UNSUPPORTED\", Ke = \"ERR_UNKNOWN_ENV\", Ve = \"ERR_INVOKE_CUSTOM_METHOD_RESPONSE\", ue = /* @__PURE__ */ E(\"https://web.telegram.org\");\nfunction pe(e, t) {\n  O(\"Posting event:\", t ? { eventType: e, eventData: t } : { eventType: e });\n  const n = window;\n  if (ee(n)) {\n    n.TelegramWebviewProxy.postEvent(e, JSON.stringify(t));\n    return;\n  }\n  const r = JSON.stringify({ eventType: e, eventData: t });\n  if (De())\n    return n.parent.postMessage(r, ue());\n  const { external: o } = n;\n  if (l({ notify: Q() })().isValid(o)) {\n    o.notify(r);\n    return;\n  }\n  throw new b(Ke);\n}\nfunction fe(e, t, n) {\n  n || (n = {});\n  const { capture: r } = n, [o, s] = L();\n  return new w((a) => {\n    (Array.isArray(t) ? t : [t]).forEach((i) => {\n      o(\n        Je(i, (c) => {\n          (!r || (Array.isArray(t) ? r({\n            event: i,\n            payload: c\n          }) : r(c))) && a(c);\n        })\n      );\n    }), (n.postEvent || pe)(e, n.params);\n  }, n).finally(s);\n}\nfunction I(e) {\n  return Ae()(e);\n}\nfunction _e(e) {\n  return I(\n    e.replace(/^[^?#]*[?#]/, \"\").replace(/[?#]/g, \"&\")\n  );\n}\nfunction Ze() {\n  return _e(window.location.href);\n}\nfunction ze() {\n  const e = performance.getEntriesByType(\"navigation\")[0];\n  if (!e)\n    throw new Error(\"Unable to get first navigation entry.\");\n  return _e(e.name);\n}\nconst Xe = \"launchParams\";\nfunction Ye() {\n  return I(Le(Xe) || \"\");\n}\nfunction le(e) {\n  ke(\"launchParams\", /* @__PURE__ */ $e(e));\n}\nfunction be(e) {\n  return e instanceof Error ? e.message + (e.cause ? `\n  ${be(e.cause)}` : \"\") : JSON.stringify(e);\n}\nfunction Qe() {\n  const e = [];\n  for (const t of [\n    // Try to retrieve launch parameters from the current location. This method can return\n    // nothing in case, location was changed, and then the page was reloaded.\n    Ze,\n    // Then, try using the lower level API - window.performance.\n    ze,\n    // Finally, try to extract launch parameters from the session storage.\n    Ye\n  ])\n    try {\n      const n = t();\n      return le(n), n;\n    } catch (n) {\n      e.push(n);\n    }\n  throw new b(He, [\n    \"Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?\",\n    \"ðŸ“– Refer to docs for more information:\",\n    \"https://docs.telegram-mini-apps.com/packages/telegram-apps-sdk/environment\",\n    \"Collected errors:\",\n    ...e.map((t) => `â€” ${be(t)}`)\n  ].join(`\n`));\n}\nfunction lt(e) {\n  if (e === \"simple\")\n    try {\n      return Qe(), !0;\n    } catch {\n      return !1;\n    }\n  return w.withFn(async () => {\n    if (ee(window))\n      return !0;\n    try {\n      return await fe(\"web_app_request_theme\", \"theme_changed\", { timeout: 100 }), !0;\n    } catch {\n      return !1;\n    }\n  }, e);\n}\nfunction k(e, t) {\n  window.dispatchEvent(new MessageEvent(\"message\", {\n    data: JSON.stringify({ eventType: e, eventData: t }),\n    // We specify window.parent to imitate the case, the parent iframe sent us this event.\n    source: window.parent\n  }));\n}\nfunction et(e, t) {\n  if (typeof t == \"string\")\n    try {\n      const { eventType: n } = Y()(t);\n      n === \"web_app_request_theme\" && k(\"theme_changed\", {\n        theme_params: JSON.parse(/* @__PURE__ */ X(e))\n      }), n === \"web_app_request_viewport\" && k(\"viewport_changed\", {\n        width: window.innerWidth,\n        height: window.innerHeight,\n        is_state_stable: !0,\n        is_expanded: !0\n      });\n    } catch {\n    }\n}\nfunction bt(e) {\n  var r;\n  const t = typeof e == \"string\" ? I(e) : e;\n  le(t);\n  const n = (r = window.TelegramWebviewProxy) == null ? void 0 : r.postEvent;\n  window.TelegramWebviewProxy = {\n    postEvent(o, s) {\n      et(t.themeParams, JSON.stringify({ eventType: o, eventData: s })), n == null || n(o, s);\n    }\n  }, O(\"Environment was mocked by the mockTelegramEnv function\");\n}\nfunction gt() {\n  [\n    [\"TelegramGameProxy_receiveEvent\"],\n    // Windows Phone.\n    [\"TelegramGameProxy\", \"receiveEvent\"],\n    // Desktop.\n    [\"Telegram\", \"WebView\", \"receiveEvent\"]\n    // Android and iOS.\n  ].forEach((e) => {\n    let t = window;\n    e.forEach((n, r, o) => {\n      if (r === o.length - 1) {\n        t[n] = k;\n        return;\n      }\n      n in t || (t[n] = {}), t = t[n];\n    });\n  });\n}\nfunction wt() {\n  [\"TelegramGameProxy_receiveEvent\", \"TelegramGameProxy\", \"Telegram\"].forEach((e) => {\n    delete window[e];\n  });\n}\nfunction ht(e, t, n) {\n  ce(e).unsub(t, n);\n}\nfunction dt(e, t) {\n  return ie().sub(e, t);\n}\nfunction mt(e, t) {\n  N.unsub(e, t);\n}\nfunction tt(e) {\n  return ({ req_id: t }) => t === e;\n}\nfunction J(e) {\n  return e.split(\".\").map(Number);\n}\nfunction nt(e, t) {\n  const n = J(e), r = J(t), o = Math.max(n.length, r.length);\n  for (let s = 0; s < o; s += 1) {\n    const a = n[s] || 0, i = r[s] || 0;\n    if (a !== i)\n      return a > i ? 1 : -1;\n  }\n  return 0;\n}\nfunction p(e, t) {\n  return nt(e, t) <= 0;\n}\nfunction B(e, t, n) {\n  if (typeof n == \"string\") {\n    if (e === \"web_app_open_link\") {\n      if (t === \"try_instant_view\")\n        return p(\"6.4\", n);\n      if (t === \"try_browser\")\n        return p(\"7.6\", n);\n    }\n    if (e === \"web_app_set_header_color\" && t === \"color\")\n      return p(\"6.9\", n);\n    if (e === \"web_app_close\" && t === \"return_back\")\n      return p(\"7.6\", n);\n    if (e === \"web_app_setup_main_button\" && t === \"has_shine_effect\")\n      return p(\"7.10\", n);\n  }\n  switch (e) {\n    case \"web_app_open_tg_link\":\n    case \"web_app_open_invoice\":\n    case \"web_app_setup_back_button\":\n    case \"web_app_set_background_color\":\n    case \"web_app_set_header_color\":\n    case \"web_app_trigger_haptic_feedback\":\n      return p(\"6.1\", t);\n    case \"web_app_open_popup\":\n      return p(\"6.2\", t);\n    case \"web_app_close_scan_qr_popup\":\n    case \"web_app_open_scan_qr_popup\":\n    case \"web_app_read_text_from_clipboard\":\n      return p(\"6.4\", t);\n    case \"web_app_switch_inline_query\":\n      return p(\"6.7\", t);\n    case \"web_app_invoke_custom_method\":\n    case \"web_app_request_write_access\":\n    case \"web_app_request_phone\":\n      return p(\"6.9\", t);\n    case \"web_app_setup_settings_button\":\n      return p(\"6.10\", t);\n    case \"web_app_biometry_get_info\":\n    case \"web_app_biometry_open_settings\":\n    case \"web_app_biometry_request_access\":\n    case \"web_app_biometry_request_auth\":\n    case \"web_app_biometry_update_token\":\n      return p(\"7.2\", t);\n    case \"web_app_setup_swipe_behavior\":\n      return p(\"7.7\", t);\n    case \"web_app_share_to_story\":\n      return p(\"7.8\", t);\n    case \"web_app_setup_secondary_button\":\n    case \"web_app_set_bottom_bar_color\":\n      return p(\"7.10\", t);\n    default:\n      return [\n        \"iframe_ready\",\n        \"iframe_will_reload\",\n        \"web_app_close\",\n        \"web_app_data_send\",\n        \"web_app_expand\",\n        \"web_app_open_link\",\n        \"web_app_ready\",\n        \"web_app_request_theme\",\n        \"web_app_request_viewport\",\n        \"web_app_setup_main_button\",\n        \"web_app_setup_closing_behavior\"\n      ].includes(e);\n  }\n}\nfunction Et(e, t) {\n  t || (t = \"strict\");\n  const n = typeof t == \"function\" ? t : (r) => {\n    const { method: o, version: s } = r;\n    let a, i;\n    if (\"param\" in r ? (a = `Parameter \"${r.param}\" of \"${o}\" method is unsupported in Mini Apps version ${s}`, i = Ge) : (a = `Method \"${o}\" is unsupported in Mini Apps version ${s}`, i = Be), t === \"strict\")\n      throw new b(i, a);\n    return console.warn(a);\n  };\n  return (r, o) => B(r, e) ? Ne(o) && r === \"web_app_set_header_color\" && \"color\" in o && !B(r, \"color\", e) ? n({ version: e, method: r, param: \"color\" }) : pe(r, o) : n({ version: e, method: r });\n}\nfunction yt(e, t, n, r) {\n  return fe(\"web_app_invoke_custom_method\", \"custom_method_invoked\", {\n    ...r || {},\n    params: { method: e, params: t, req_id: n },\n    capture: tt(n)\n  }).then(({ result: o, error: s }) => {\n    if (s)\n      throw new b(Ve, s);\n    return o;\n  });\n}\nfunction rt(e) {\n  e.unsubAll(), e.reset();\n}\nfunction vt() {\n  var e;\n  (e = C()) == null || e(), [\n    ...Object.values(y()),\n    y,\n    N,\n    C,\n    ue,\n    ae\n  ].forEach(rt);\n}\nexport {\n  ae as $debug,\n  ue as $targetOrigin,\n  w as CancelablePromise,\n  ne as ERR_ABORTED,\n  re as ERR_CANCELED,\n  Ve as ERR_CUSTOM_METHOD_ERR_RESPONSE,\n  Ge as ERR_METHOD_PARAMETER_UNSUPPORTED,\n  Be as ERR_METHOD_UNSUPPORTED,\n  He as ERR_RETRIEVE_LP_FAILED,\n  oe as ERR_TIMED_OUT,\n  Ke as ERR_UNKNOWN_ENV,\n  A as EnhancedPromise,\n  b as TypedError,\n  x as addEventListener,\n  ct as camelToKebab,\n  ut as camelToSnake,\n  tt as captureSameReq,\n  nt as compareVersions,\n  M as createAbortError,\n  L as createCbCollector,\n  We as createLogger,\n  Et as createPostEvent,\n  W as createTypedErrorPredicate,\n  gt as defineEventHandlers,\n  _t as deleteCssVar,\n  k as emitMiniAppsEvent,\n  Le as getStorageValue,\n  ee as hasWebviewProxy,\n  yt as invokeCustomMethod,\n  st as isAbortError,\n  at as isCanceledError,\n  De as isIframe,\n  lt as isTMA,\n  ot as isTimeoutError,\n  bt as mockTelegramEnv,\n  ht as off,\n  Je as on,\n  pe as postEvent,\n  wt as removeEventHandlers,\n  fe as request,\n  vt as resetPackageState,\n  Qe as retrieveLaunchParams,\n  ft as setCssVar,\n  ke as setStorageValue,\n  it as sleep,\n  pt as snakeToCamel,\n  dt as subscribe,\n  B as supports,\n  mt as unsubscribe\n};\n//# sourceMappingURL=index.js.map\n", "function i() {\n  return performance.getEntriesByType(\"navigation\")[0];\n}\nfunction c() {\n  const t = i();\n  return !!t && t.type === \"reload\";\n}\nfunction o(t, n) {\n  return t.startsWith(n) ? t : `${n}${t}`;\n}\nfunction R(t) {\n  return new URL(\n    typeof t == \"string\" ? t : [\n      t.pathname || \"\",\n      o(t.search || \"\", \"?\"),\n      o(t.hash || \"\", \"#\")\n    ].join(\"\"),\n    \"http://a\"\n  );\n}\nfunction a(t) {\n  const n = (typeof t == \"string\" ? t : t.pathname || \"\").startsWith(\"/\"), e = R(t), { pathname: s } = e;\n  return `${n ? s : s.slice(1)}${e.search}${e.hash}`;\n}\nconst r = \"ERR_NAVIGATION_HISTORY_EMPTY\", I = \"ERR_NAVIGATION_CURSOR_INVALID\";\nexport {\n  I as ERR_CURSOR_INVALID,\n  r as ERR_HISTORY_EMPTY,\n  R as createSafeURL,\n  o as ensurePrefix,\n  i as getFirstNavigationEntry,\n  c as isPageReload,\n  a as urlToPath\n};\n//# sourceMappingURL=index.js.map\n", "let r;\nfunction y(e, c) {\n  r && r.set(e, c) || c();\n}\nfunction m(e) {\n  if (r)\n    return e();\n  r = /* @__PURE__ */ new Map();\n  try {\n    e();\n  } finally {\n    r.forEach((c) => c()), r = void 0;\n  }\n}\n// @__NO_SIDE_EFFECTS__\nfunction S(e, c) {\n  c || (c = {});\n  const g = c.equals || Object.is;\n  let u = [], s = e;\n  const i = (t) => {\n    if (!g(s, t)) {\n      const l = s;\n      s = t, y(o, () => {\n        [...u].forEach(([f, d]) => {\n          f(t, l), d && n(f, !0);\n        });\n      });\n    }\n  };\n  function a(t) {\n    const l = typeof t != \"object\" ? { once: t } : t;\n    return {\n      once: l.once || !1,\n      signal: l.signal || !1\n    };\n  }\n  const n = (t, l) => {\n    const f = a(l), d = u.findIndex(([h, p]) => h === t && p.once === f.once && p.signal === f.signal);\n    d >= 0 && u.splice(d, 1);\n  }, o = Object.assign(\n    function() {\n      return j(o), s;\n    },\n    {\n      destroy() {\n        u = [];\n      },\n      set: i,\n      reset() {\n        i(e);\n      },\n      sub(t, l) {\n        return u.push([t, a(l)]), () => n(t, l);\n      },\n      unsub: n,\n      unsubAll() {\n        u = u.filter((t) => t[1].signal);\n      }\n    }\n  );\n  return o;\n}\nconst b = [];\nfunction j(e) {\n  b.length && b[b.length - 1].add(e);\n}\n// @__NO_SIDE_EFFECTS__\nfunction x(e, c) {\n  let g = /* @__PURE__ */ new Set(), u;\n  function s() {\n    return u || (u = /* @__PURE__ */ S(a(), c));\n  }\n  function i() {\n    s().set(a());\n  }\n  function a() {\n    g.forEach((t) => {\n      t.unsub(i, { signal: !0 });\n    });\n    const n = /* @__PURE__ */ new Set();\n    let o;\n    b.push(n);\n    try {\n      o = e();\n    } finally {\n      b.pop();\n    }\n    return n.forEach((t) => {\n      t.sub(i, { signal: !0 });\n    }), g = n, o;\n  }\n  return Object.assign(function() {\n    return s()();\n  }, {\n    destroy() {\n      s().destroy();\n    },\n    sub(...n) {\n      return s().sub(...n);\n    },\n    unsub(...n) {\n      s().unsub(...n);\n    },\n    unsubAll(...n) {\n      s().unsubAll(...n);\n    }\n  });\n}\nexport {\n  m as batch,\n  x as computed,\n  S as signal\n};\n//# sourceMappingURL=index.js.map\n", "import {\n  retrieveLaunchParams,\n  postEvent as _postEvent,\n  request as _request,\n  invokeCustomMethod as _invokeCustomMethod,\n  createPostEvent,\n  type PostEventFn,\n  type Version,\n  type RequestFn,\n  type CancelablePromise,\n  type ExecuteWithOptions,\n  type CustomMethodParams,\n  type CustomMethodName,\n} from '@telegram-apps/bridge';\nimport { signal } from '@telegram-apps/signals';\n\nexport interface ConfigureOptions {\n  /**\n   * A maximum supported Mini Apps version.\n   * @default Being extracted using the `retrieveLaunchParams` function.\n   * @see retrieveLaunchParams\n   */\n  version?: Version;\n  /**\n   * Custom postEvent function.\n   *\n   * Passing the \"strict\" value creates a function, which always checks if specified call supported\n   * by currently supported Mini Apps version. If the method is unsupported, an error will be\n   * thrown.\n   *\n   * Passing the \"non-strict\" value creates a postEvent function not throwing any errors, but\n   * warning about a missing method support.\n   *\n   * @default 'strict'\n   * @see createPostEvent\n   */\n  postEvent?: PostEventFn;\n}\n\n/**\n * Signal with a request identifier generator. Usually, you don't need to set this value manually.\n */\nexport const $createRequestId = signal((() => {\n  let requestId = 0;\n  return () => (requestId += 1).toString();\n})());\n\n/**\n * Signal with a currently used postEvent function across the package.\n */\nexport const $postEvent = signal<PostEventFn>(_postEvent);\n\n/**\n * Signal with a currently supported maximum Mini Apps version. This value is usually set via\n */\nexport const $version = signal<Version>('0.0');\n\n/**\n * Configures package global dependencies.\n * @param options - configuration additional options.\n */\nexport function configure(options?: ConfigureOptions): void {\n  options ||= {};\n  const { postEvent: optionsPostEvent } = options;\n  const v = options.version || retrieveLaunchParams().version;\n  $version.set(v);\n  $postEvent.set(\n    typeof optionsPostEvent === 'function'\n      ? optionsPostEvent\n      : createPostEvent(v),\n  );\n}\n\n/**\n * Creates a new request id.\n */\nexport function createRequestId(): string {\n  return $createRequestId()();\n}\n\n/**\n * Invokes known custom method. Returns method execution result.\n * @param method - method name.\n * @param params - method parameters.\n * @param options - additional options.\n * @throws {TypedError} ERR_CUSTOM_METHOD_ERR_RESPONSE\n */\nexport function invokeCustomMethod<M extends CustomMethodName>(\n  method: M,\n  params: CustomMethodParams<M>,\n  options?: ExecuteWithOptions,\n): CancelablePromise<unknown>;\n\n/**\n * Invokes unknown custom method. Returns method execution result.\n * @param method - method name.\n * @param params - method parameters.\n * @param options - additional options.\n * @throws {TypedError} ERR_CUSTOM_METHOD_ERR_RESPONSE\n */\nexport function invokeCustomMethod(\n  method: string,\n  params: object,\n  options?: ExecuteWithOptions,\n): CancelablePromise<unknown>;\n\nexport function invokeCustomMethod(\n  method: string,\n  params: object,\n  options?: ExecuteWithOptions,\n): CancelablePromise<unknown> {\n  return _invokeCustomMethod(method, params, createRequestId(), {\n    ...options || {},\n    postEvent: postEvent,\n  });\n}\n\n/**\n * `request` function from the bridge with applied global `postEvent` option.\n */\nexport const request = ((method: any, eventOrEvents: any, options: any) => {\n  options ||= {};\n  options.postEvent ||= postEvent;\n  return _request(method, eventOrEvents, options);\n}) as RequestFn;\n\n/**\n * Shortcut for $postEvent call.\n */\nexport const postEvent = ((method: any, params: any) => {\n  return $postEvent()(method, params);\n}) as PostEventFn;\n", "import { type Computed, computed } from '@telegram-apps/signals';\nimport { type MethodName, supports } from '@telegram-apps/bridge';\n\nimport { $version } from '@/scopes/globals.js';\n\n/**\n * @returns A signal indicating if the specified Mini Apps method is supported.\n * @param method - Mini Apps method name\n */\nexport function createIsSupported(method: MethodName): Computed<boolean> {\n  return computed(() => supports(method, $version()));\n}", "export const ERR_POPUP_INVALID_PARAMS = 'ERR_POPUP_INVALID_PARAMS';\nexport const ERR_INVALID_URL = 'ERR_INVALID_URL';\nexport const ERR_INVALID_SLUG = 'ERR_INVALID_SLUG';\nexport const ERR_DATA_INVALID_SIZE = 'ERR_DATA_INVALID_SIZE';\nexport const ERR_ACCESS_DENIED = 'ERR_ACCESS_DENIED';\nexport const ERR_ALREADY_REQUESTING = 'ERR_ALREADY_REQUESTING';\nexport const ERR_ALREADY_OPENED = 'ERR_ALREADY_OPENED';\nexport const ERR_ALREADY_MOUNTING = 'ERR_ALREADY_MOUNTING';\nexport const ERR_CSS_VARS_ALREADY_BOUND = 'ERR_VARS_ALREADY_BOUND';\nexport const ERR_NOT_AVAILABLE = 'ERR_NOT_AVAILABLE';\nexport const ERR_NOT_INITIALIZED = 'ERR_NOT_INITIALIZED';\nexport const ERR_NOT_SUPPORTED = 'ERR_NOT_SUPPORTED';\nexport const ERR_NOT_MOUNTED = 'ERR_NOT_MOUNTED';\n", "/**\n * @returns True, if current environment is server.\n */\nexport function isSSR(): boolean {\n  return typeof window === 'undefined';\n}\n", "import {\n  ERR_UNKNOWN_ENV,\n  type If,\n  type MethodName,\n  supports,\n  isTMA,\n  TypedError,\n  type MethodNameWithVersionedParams,\n  type MethodVersionedParams, IsNever,\n} from '@telegram-apps/bridge';\nimport { type Computed, computed } from '@telegram-apps/signals';\n\nimport { $version } from '@/scopes/globals.js';\nimport {\n  ERR_NOT_INITIALIZED,\n  ERR_NOT_MOUNTED,\n  ERR_NOT_SUPPORTED,\n} from '@/errors.js';\nimport { isSSR } from '@/utils/isSSR.js';\nimport type { AnyFn } from '@/types.js';\n\ntype HasCheckSupportMethodTuple<FnArgs extends any[]> = {\n  [M in MethodNameWithVersionedParams]: [\n    method: M,\n    parameter: MethodVersionedParams<M>,\n    shouldCheck: (...args: FnArgs) => boolean,\n  ]\n}[MethodNameWithVersionedParams];\n\ninterface CustomSupportValidator {\n  fn: () => boolean;\n  error: string;\n}\n\nexport type IsSupported =\n  | MethodName\n  | CustomSupportValidator\n  | (MethodName | CustomSupportValidator)[]\n  | { any: (MethodName | CustomSupportValidator)[] };\n\nexport type Supports<Fn extends AnyFn> = Record<string, HasCheckSupportMethodTuple<Parameters<Fn>>>\n\nexport type SafeWrapped<\n  Fn extends AnyFn,\n  Supported extends boolean,\n  SupportsSchema extends Record<string, any>\n> =\n  & Fn\n  & {\n  /**\n   * The signal returning `true` if the function is available in the\n   * current environment.\n   *\n   * To be more accurate, the method checks the following:\n   * 1. The current environment is not TMA or server.\n   * 2. The SDK package is initialized.\n   * 3. If passed, the `isSupported` signal returns true.\n   * 4. If passed, the `isMounted` signal returns true.\n   *\n   * *You should use this function when possible because it provides\n   * must-have code security mechanisms and makes a developer sure that\n   * he is using the package properly.*\n   *\n   * @returns True if the function is available in the current environment.\n   * @example\n   * if (showBackButton.isAvailable()) {\n   *   showBackButton();\n   * }\n   */\n  isAvailable: Computed<boolean>;\n  /**\n   * Calls the function only in case it is available.\n   * @example\n   * showBackButton.ifAvailable();\n   */\n  ifAvailable(...args: Parameters<Fn>): ReturnType<Fn> | undefined;\n}\n  & If<Supported, {\n  /**\n   * The signal returning `true` if the function is supported by\n   * the current Mini Apps version including some possible additional\n   * conditions.\n   *\n   * It is highly recommended to use this signal only in certain narrow cases\n   * when only the function support check is required.\n   *\n   * This signal is not applying additional operations like checking if the\n   * current environment is Mini Apps and the SDK is initialized.\n   *\n   * To check if the function is available for use, use the `isAvailable`\n   * signal.\n   *\n   * @returns True if this function is supported.\n   * @see isAvailable\n   * @example\n   * if (setMiniAppBottomBarColor.isSupported()) {\n   *   console.log('Mini App bottom bar is supported, but the function is still probably unavailable');\n   * }\n   */\n  isSupported: Computed<boolean>;\n}, {}>\n  & If<IsNever<SupportsSchema>, {}, {\n  /**\n   * A map where the key is the function-specific option name and value is a signal indicating\n   * if it is supported by the current environment.\n   * @example\n   * if (setHeaderColor.isAvailable()) {\n   *   if (setHeaderColor.supports.rgb()) {\n   *     setHeaderColor('#ffaabb');\n   *   } else {\n   *     setHeaderColor('bg_color');\n   *   }\n   * }\n   */\n  supports: Record<keyof SupportsSchema, Computed<boolean>>\n}>\n\ninterface Options<Fn extends AnyFn> {\n  component?: string;\n  isMounted?: () => boolean;\n  isSupported?: IsSupported;\n  supports?: Supports<Fn>,\n}\n\nexport function wrapSafe<Fn extends AnyFn>(\n  method: string,\n  fn: Fn,\n): SafeWrapped<Fn, false, never>;\n\nexport function wrapSafe<Fn extends AnyFn, O extends Options<Fn>>(\n  method: string,\n  fn: Fn,\n  options: O,\n): SafeWrapped<\n  Fn,\n  O extends { isSupported: any } ? true : false,\n  O extends { supports: infer S extends Record<string, any> } ? S : never\n>\n\n/*@__NO_SIDE_EFFECTS__*/\nexport function wrapSafe<Fn extends AnyFn>(\n  method: string,\n  fn: Fn,\n  { isSupported, isMounted, component, supports: supportsOption }: Options<Fn> = {},\n): SafeWrapped<Fn, boolean, Record<string, any> | never> {\n  // Full function identifier.\n  const fullName = `${component ? `${component}.` : ''}${method}()`;\n\n  // Simplify the isSupported value to work with an array of validators or a single object.\n  isSupported = isSupported\n    ? Array.isArray(isSupported)\n      // (MethodName | CustomSupportValidator)[]\n      ? isSupported\n      : typeof isSupported === 'object' && 'any' in isSupported\n        // { any: (MethodName | CustomSupportValidator)[] }\n        ? isSupported\n        // MethodName | CustomSupportValidator\n        : [isSupported]\n    : undefined;\n\n  /**\n   * @returns True if the specified option is supported.\n   * @param option - option name.\n   */\n  function isOptionSupported(option: string): boolean {\n    if (supportsOption) {\n      const tuple = supportsOption[option];\n      return supports(tuple[0], tuple[1], $version());\n    }\n    return true;\n  }\n\n  /**\n   * @returns An error related to isSupported() check.\n   */\n  const supportError = (): string | undefined => {\n    // isSupported was not specified. In this case we assume that the function has no dependencies\n    // and is always supported.\n    if (!isSupported) {\n      return;\n    }\n\n    const defaultErr = `it is unsupported in Mini Apps version ${$version()}`;\n\n    function getError(item: MethodName | CustomSupportValidator): string | undefined {\n      return typeof item === 'string'\n        ? supports(item, $version())\n          ? undefined\n          : defaultErr\n        : item.fn()\n          ? undefined\n          : item.error;\n    }\n\n    // Should check each array item.\n    // (MethodName | CustomSupportValidator)[]\n    if (Array.isArray(isSupported)) {\n      for (const item of isSupported) {\n        const err = getError(item);\n        if (err) {\n          return err;\n        }\n      }\n      return;\n    }\n\n    // Should check if any item didn't return an error.\n    let lastErr: string | undefined;\n    for (const item of isSupported.any) {\n      lastErr = getError(item);\n      if (!lastErr) {\n        return;\n      }\n    }\n    return defaultErr;\n  };\n\n  /**\n   * @returns An error related to supports.<name> check.\n   */\n  const supportsOptionError = (...args: Parameters<Fn>): string | undefined => {\n    if (supportsOption) {\n      for (const k in supportsOption) {\n        if (supportsOption[k][2](...args) && !isOptionSupported(k)) {\n          return `option ${k} is not supported in Mini Apps version ${$version()}`;\n        }\n      }\n    }\n  };\n\n  const $isSupported = computed(() => !supportError());\n  const $isInitialized = computed(() => $version() !== '0.0');\n  const $isMounted = computed(() => !isMounted || isMounted());\n  const $isAvailable = computed(\n    () => isTMA('simple')\n      && !isSSR()\n      && $isInitialized()\n      && $isSupported()\n      && $isMounted(),\n  );\n\n  let supportsMap: Record<string, Computed<boolean>> | undefined;\n  if (supportsOption) {\n    supportsMap = {};\n    for (const option in supportsOption) {\n      supportsMap[option] = computed(() => isOptionSupported(option));\n    }\n  }\n\n  return Object.assign(\n    (...args: Parameters<Fn>): ReturnType<Fn> => {\n      const errMessagePrefix = `Unable to call the ${fullName} ${component ? 'method' : 'function'}:`;\n\n      if (isSSR() || !isTMA('simple')) {\n        throw new TypedError(\n          ERR_UNKNOWN_ENV,\n          `${errMessagePrefix} it can't be called outside Mini Apps`,\n        );\n      }\n      if (!$isInitialized()) {\n        throw new TypedError(\n          ERR_NOT_INITIALIZED,\n          `${errMessagePrefix} the SDK was not initialized. Use the SDK init() function`,\n        );\n      }\n      const supportErr = supportError();\n      if (supportErr) {\n        throw new TypedError(ERR_NOT_SUPPORTED, `${errMessagePrefix} ${supportErr}`);\n      }\n      const supportsOptionErr = supportsOptionError(...args);\n      if (supportsOptionErr) {\n        throw new TypedError(ERR_NOT_SUPPORTED, `${errMessagePrefix} ${supportsOptionErr}`);\n      }\n      if (!$isMounted()) {\n        throw new TypedError(\n          ERR_NOT_MOUNTED,\n          `${errMessagePrefix} the component is not mounted. Use the ${component}.mount() method`,\n        );\n      }\n      return fn(...args);\n    },\n    fn,\n    {\n      isAvailable: $isAvailable,\n      ifAvailable(...args: Parameters<Fn>): ReturnType<Fn> | undefined {\n        return $isAvailable()\n          ? fn(...args)\n          : undefined;\n      },\n    },\n    isSupported ? {\n      isSupported: $isSupported,\n    } : {},\n    supportsMap ? {\n      supports: supportsMap,\n    } : {},\n  );\n}\n", "import type { AnyFn } from '@/types.js';\nimport {\n  wrapSafe,\n  type IsSupported,\n  type SafeWrapped,\n  type Supports,\n} from '@/scopes/toolkit/wrapSafe.js';\n\nexport interface SafeWrapFn<S extends boolean> {\n  <Fn extends AnyFn>(method: string, fn: Fn): SafeWrapped<Fn, S, never>;\n  <Fn extends AnyFn>(method: string, fn: Fn, isSupported: IsSupported): SafeWrapped<Fn, true, never>;\n  <Fn extends AnyFn, S extends Supports<Fn>>(\n    method: string,\n    fn: Fn,\n    isSupported: IsSupported,\n    supports: S,\n  ): SafeWrapped<Fn, true, S>;\n}\n\ninterface Options {\n  isMounted?: () => boolean;\n  isSupported?: IsSupported;\n}\n\nexport function createWrapSafe(component?: string): SafeWrapFn<false>;\n\nexport function createWrapSafe<O extends Options>(\n  component: string,\n  options: O,\n): SafeWrapFn<O extends { isSupported: any } ? true : false>;\n\nexport function createWrapSafe(\n  component?: string,\n  options?: Options,\n): SafeWrapFn<boolean> {\n  options ||= {};\n  return ((method, fn, overrideIsSupported, supports) => wrapSafe(method, fn, {\n    ...options,\n    isSupported: overrideIsSupported || options.isSupported,\n    supports,\n    component,\n  })) as SafeWrapFn<boolean>;\n}\n", "import type { IsSupported } from '@/scopes/toolkit/wrapSafe.js';\nimport { createWrapSafe, type SafeWrapFn } from '@/scopes/toolkit/createWrapSafe.js';\n\nexport function createWrapComplete(\n  component: string,\n  isMounted: () => boolean,\n  isSupported: IsSupported,\n): SafeWrapFn<true> {\n  return createWrapSafe(component, { isSupported, isMounted });\n}\n", "import {\n  createWrapSafe,\n  type SafeWrapFn,\n} from '@/scopes/toolkit/createWrapSafe.js';\nimport type { IsSupported } from '@/scopes/toolkit/wrapSafe.js';\n\nexport function createWrapSupported(\n  component: string,\n  isSupported: IsSupported,\n): SafeWrapFn<true> {\n  return createWrapSafe(component, { isSupported });\n}", "import {\n  off,\n  on,\n  getStorageValue,\n  setStorageValue,\n  type EventListener,\n} from '@telegram-apps/bridge';\nimport { isPageReload } from '@telegram-apps/navigation';\nimport { signal } from '@telegram-apps/signals';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { createIsSupported } from '@/scopes/toolkit/createIsSupported.js';\nimport { createWrapComplete } from '@/scopes/toolkit/createWrapComplete.js';\nimport { createWrapSupported } from '@/scopes/toolkit/createWrapSupported.js';\n\ntype StorageValue = boolean;\n\nconst SETUP_METHOD_NAME = 'web_app_setup_back_button';\nconst CLICK_EVENT_NAME = 'back_button_pressed';\nconst COMPONENT_NAME = 'backButton';\n\n/**\n * Signal indicating if the Back Button is currently visible.\n */\nexport const isVisible = signal(false);\n\n/**\n * Signal indicating if the Back Button is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * Signal indicating if the Back Button is supported.\n */\nexport const isSupported = createIsSupported(SETUP_METHOD_NAME);\n\nconst wrapComplete = createWrapComplete(COMPONENT_NAME, isMounted, SETUP_METHOD_NAME);\nconst wrapSupported = createWrapSupported(COMPONENT_NAME, SETUP_METHOD_NAME);\n\n/**\n * Hides the Back Button.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @since Mini Apps v6.1\n * @example\n * if (hide.isAvailable()) {\n *   hide();\n * }\n */\nexport const hide = wrapComplete('hide', (): void => {\n  setVisibility(false);\n});\n\n/**\n * Mounts the Back Button restoring its state.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @since Mini Apps v6.1\n * @example\n * if (mount.isAvailable()) {\n *   mount();\n * }\n */\nexport const mount = wrapSupported('mount', (): void => {\n  if (!isMounted()) {\n    setVisibility(isPageReload() && getStorageValue<StorageValue>(COMPONENT_NAME) || false);\n    isMounted.set(true);\n  }\n});\n\nfunction setVisibility(value: boolean): void {\n  if (value !== isVisible()) {\n    postEvent(SETUP_METHOD_NAME, { is_visible: value });\n    setStorageValue<StorageValue>(COMPONENT_NAME, value);\n    isVisible.set(value);\n  }\n}\n\n/**\n * Adds a new Back Button click listener.\n * @param fn - event listener.\n * @returns A function to remove bound listener.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @since Mini Apps v6.1\n * @example\n * if (onClick.isAvailable()) {\n *   const off = onClick(() => {\n *     console.log('User clicked the Back Button');\n *     off();\n *   });\n * }\n */\nexport const onClick = wrapSupported(\n  'onClick',\n  (fn: EventListener<'back_button_pressed'>): VoidFunction => on(CLICK_EVENT_NAME, fn),\n);\n\n/**\n * Removes the Back Button click listener.\n * @param fn - an event listener.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @since Mini Apps v6.1\n * @example\n * if (offClick.isAvailable()) {\n *   function listener() {\n *     console.log('User clicked the Back Button');\n *     offClick(listener);\n *   }\n *   onClick(listener);\n * }\n */\nexport const offClick = wrapSupported(\n  'offClick',\n  (fn: EventListener<'back_button_pressed'>): void => {\n    off(CLICK_EVENT_NAME, fn);\n  },\n);\n\n/**\n * Shows the Back Button.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @since Mini Apps v6.1\n * @example\n * if (show.isAvailable()) {\n *   show();\n * }\n */\nexport const show = wrapComplete('show', (): void => {\n  setVisibility(true);\n});\n\n/**\n * Unmounts the Back Button.\n *\n * Note that this function does not remove listeners added via the `onClick`\n * function, so you have to remove them on your own.\n * @see onClick\n */\nexport function unmount(): void {\n  isMounted.set(false);\n}\n", "import { batch, type Signal } from '@telegram-apps/signals';\nimport {\n  type AsyncOptions,\n  CancelablePromise,\n  TypedError,\n} from '@telegram-apps/bridge';\n\nimport { ERR_ALREADY_MOUNTING } from '@/errors.js';\n\n/**\n * Creates a mount function for a component.\n * @param component - the component name.\n * @param mount - function mounting the component.\n * @param onMounted - callback which will be called with the mount result.\n * @param mountPromise - signal containing mount promise.\n * @param isMounted - signal containing mount state.\n * @param mountError - signal containing mount error.\n */\n// #__NO_SIDE_EFFECTS__\nexport function createMountFn<T = void>(\n  component: string,\n  mount: (options: AsyncOptions) => (T | CancelablePromise<T>),\n  onMounted: (result: T) => void,\n  {\n    isMounting,\n    isMounted,\n    mountError,\n  }: {\n    isMounted: Signal<boolean>,\n    isMounting: Signal<boolean>,\n    mountError: Signal<Error | undefined>,\n  },\n): (options?: AsyncOptions) => CancelablePromise<void> {\n  return mountOptions => {\n    return CancelablePromise.withFn(async abortSignal => {\n      if (isMounted()) {\n        return;\n      }\n      if (isMounting()) {\n        throw new TypedError(\n          ERR_ALREADY_MOUNTING,\n          `The ${component} component is already mounting`,\n        );\n      }\n      isMounting.set(true);\n\n      let result: [completed: true, result: T] | [completed: false, err: Error];\n      try {\n        result = [true, await mount({ abortSignal })];\n      } catch (e) {\n        result = [false, e as Error];\n      }\n      batch(() => {\n        isMounting.set(false);\n        isMounted.set(true);\n\n        if (result[0]) {\n          onMounted(result[1]);\n        } else {\n          const error = result[1];\n          mountError.set(error);\n          throw error;\n        }\n      });\n    }, mountOptions);\n  };\n}", "import { createWrapSafe } from '@/scopes/toolkit/createWrapSafe.js';\n\nexport const createWrapBasic = createWrapSafe;", "import { computed, signal } from '@telegram-apps/signals';\n\nimport type { State } from './types.js';\n\n/**\n * Complete biometry manager state.\n */\nexport const state = signal<State | undefined>();\n\n/**\n * True if the manager is currently authenticating.\n */\nexport const isAuthenticating = signal<boolean>(false);\n\n/**\n * True if the manager is currently requesting access.\n */\nexport const isRequestingAccess = signal<boolean>(false);\n\n/**\n * True if the component is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * True if the component is currently mounting.\n */\nexport const isMounting = signal<boolean>(false);\n\n/**\n * Error occurred while mounting the component.\n */\nexport const mountError = signal<Error | undefined>(undefined);\n\n/**\n * Signal indicating biometry is available.\n */\nexport const isAvailable = computed(() => {\n  const s = state();\n  return s && s.available;\n});\n", "import type { EventPayload } from '@telegram-apps/bridge';\n\nimport type { State } from './types.js';\n\n/**\n * Converts `biometry_info_received` to some common shape.\n * @param event - event payload.\n * @see biometry_info_received\n */\nexport function eventToState(event: EventPayload<'biometry_info_received'>): State {\n  return event.available ? {\n    available: true,\n    tokenSaved: event.token_saved,\n    deviceId: event.device_id,\n    accessRequested: event.access_requested,\n    type: event.type,\n    accessGranted: event.access_granted,\n  } : {\n    available: false,\n  };\n}\n", "import type { ExecuteWithOptions, CancelablePromise } from '@telegram-apps/bridge';\n\nimport { request } from '@/scopes/globals.js';\nimport { wrapSafe } from '@/scopes/toolkit/wrapSafe.js';\n\nimport { eventToState } from './eventToState.js';\nimport type { State } from './types.js';\n\nconst GET_INFO_METHOD = 'web_app_biometry_get_info';\n\n/**\n * Requests biometry information.\n * @since Mini Apps v7.2\n * @param options - additional execution options.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (requestBiometry.isAvailable()) {\n *   const biometryState = await requestBiometry();\n * }\n */\nexport const requestBiometry = wrapSafe(\n  'requestBiometry',\n  (options?: ExecuteWithOptions): CancelablePromise<State> => {\n    return request(GET_INFO_METHOD, 'biometry_info_received', options).then(eventToState);\n  },\n  {\n    isSupported: GET_INFO_METHOD,\n  },\n);\n", "import {\n  on,\n  off,\n  TypedError,\n  CancelablePromise,\n  getStorageValue,\n  setStorageValue,\n  type BiometryTokenUpdateStatus,\n  type BiometryAuthRequestStatus,\n  type EventListener,\n} from '@telegram-apps/bridge';\nimport { isPageReload } from '@telegram-apps/navigation';\n\nimport { postEvent, request } from '@/scopes/globals.js';\nimport { createMountFn } from '@/scopes/createMountFn.js';\nimport { createIsSupported } from '@/scopes/toolkit/createIsSupported.js';\nimport { createWrapComplete } from '@/scopes/toolkit/createWrapComplete.js';\nimport { createWrapSupported } from '@/scopes/toolkit/createWrapSupported.js';\nimport { createWrapBasic } from '@/scopes/toolkit/createWrapBasic.js';\nimport { ERR_ALREADY_REQUESTING, ERR_NOT_AVAILABLE } from '@/errors.js';\n\nimport {\n  state,\n  mountError,\n  isMounted,\n  isRequestingAccess,\n  isAuthenticating,\n  isMounting,\n} from './signals.js';\nimport { requestBiometry } from './requestBiometry.js';\nimport { eventToState } from './eventToState.js';\nimport type {\n  State,\n  AuthenticateOptions,\n  RequestAccessOptions,\n  UpdateTokenOptions,\n} from './types.js';\n\ntype StorageValue = State;\n\nconst REQUEST_AUTH_METHOD = 'web_app_biometry_request_auth';\nconst REQUEST_ACCESS_METHOD = 'web_app_biometry_request_access';\nconst OPEN_SETTINGS_METHOD = 'web_app_biometry_open_settings';\nconst UPDATE_TOKEN_METHOD = 'web_app_biometry_update_token';\nconst INFO_RECEIVED_EVENT = 'biometry_info_received';\nconst COMPONENT_NAME = 'biometry';\n\n/**\n * @returns True if the biometry manager is supported.\n */\nexport const isSupported = createIsSupported(REQUEST_AUTH_METHOD);\n\nconst wrapBasic = createWrapBasic(COMPONENT_NAME);\nconst wrapSupported = createWrapSupported(COMPONENT_NAME, REQUEST_AUTH_METHOD);\nconst wrapComplete = createWrapComplete(COMPONENT_NAME, isMounted, REQUEST_AUTH_METHOD);\n\nfunction throwNotAvailable(): never {\n  throw new TypedError(ERR_NOT_AVAILABLE, 'Biometry is not available');\n}\n\n/**\n * Attempts to authenticate a user using biometrics and fetch a previously stored secure token.\n * @param options - method options.\n * @since Mini Apps v7.2\n * @returns Token from the local secure storage saved previously or undefined.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @throws {TypedError} ERR_ALREADY_REQUESTING\n * @throws {TypedError} ERR_NOT_AVAILABLE\n * @example\n * if (authenticate.isAvailable()) {\n *   const { status, token } = await authenticate({\n *     reason: 'Authenticate to open wallet',\n *   });\n * }\n */\nexport const authenticate = wrapComplete(\n  'authenticate',\n  (options?: AuthenticateOptions): CancelablePromise<{\n    /**\n     * Authentication status.\n     */\n    status: BiometryAuthRequestStatus;\n    /**\n     * Token from the local secure storage saved previously.\n     */\n    token?: string;\n  }> => {\n    return CancelablePromise.withFn(async abortSignal => {\n      if (isAuthenticating()) {\n        throw new TypedError(ERR_ALREADY_REQUESTING, 'Authentication is already in progress');\n      }\n\n      const s = state();\n      if (!s || !s.available) {\n        throwNotAvailable();\n      }\n\n      isAuthenticating.set(true);\n\n      try {\n        const response = await request(\n          REQUEST_AUTH_METHOD,\n          'biometry_auth_requested',\n          {\n            abortSignal,\n            params: {\n              reason: ((options || {}).reason || '').trim(),\n            },\n          },\n        );\n\n        const { token } = response;\n        if (typeof token === 'string') {\n          setState({ ...s, token });\n        }\n        return response;\n      } finally {\n        isAuthenticating.set(false);\n      }\n    }, options);\n  },\n);\n\n/**\n * Opens the biometric access settings for bots. Useful when you need to request biometrics\n * access to users who haven't granted it yet.\n *\n * _Note that this method can be called only in response to user interaction with the Mini App\n * interface (e.g. a click inside the Mini App or on the main button)_.\n * @since Mini Apps v7.2\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (openSettings.isAvailable()) {\n *   openSettings();\n * }\n */\nexport const openSettings = wrapSupported('openSettings', (): void => {\n  postEvent(OPEN_SETTINGS_METHOD);\n});\n\n/**\n * Requests permission to use biometrics.\n * @since Mini Apps v7.2\n * @returns Promise with true, if access was granted.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @throws {TypedError} ERR_ALREADY_REQUESTING\n * @throws {TypedError} ERR_NOT_AVAILABLE\n * @example\n * if (requestAccess.isAvailable()) {\n *   const accessGranted = await requestAccess({\n *     reason: 'Authenticate to open wallet',\n *   });\n * }\n */\nexport const requestAccess = wrapComplete(\n  'requestAccess',\n  (options?: RequestAccessOptions): CancelablePromise<boolean> => {\n    return CancelablePromise.withFn(async abortSignal => {\n      if (isRequestingAccess()) {\n        throw new TypedError(ERR_ALREADY_REQUESTING, 'Access request is already in progress');\n      }\n      isRequestingAccess.set(true);\n\n      try {\n        const info = await request(REQUEST_ACCESS_METHOD, INFO_RECEIVED_EVENT, {\n          abortSignal,\n          params: { reason: (options || {}).reason || '' },\n        }).then(eventToState);\n\n        if (!info.available) {\n          throwNotAvailable();\n        }\n        setState(info);\n\n        return info.accessGranted;\n      } finally {\n        isRequestingAccess.set(false);\n      }\n    }, options);\n  },\n);\n\n/**\n * Mounts the Biometry component.\n * @since Mini Apps v7.2\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (mount.isAvailable()) {\n *   await mount();\n * }\n */\nexport const mount = wrapBasic(\n  'mount',\n  createMountFn<State>(\n    COMPONENT_NAME,\n    (options) => {\n      const s = isPageReload() && getStorageValue<StorageValue>(COMPONENT_NAME);\n      return s ? s : requestBiometry(options);\n    },\n    result => {\n      on(INFO_RECEIVED_EVENT, onBiometryInfoReceived);\n      setState(result);\n    },\n    { isMounted, mountError, isMounting },\n  ),\n);\n\nconst onBiometryInfoReceived: EventListener<'biometry_info_received'> = e => {\n  setState(eventToState(e));\n};\n\nfunction setState(s: State): void {\n  state.set(s);\n  setStorageValue<StorageValue>(COMPONENT_NAME, s);\n}\n\n/**\n * Unmounts the component.\n */\nexport function unmount() {\n  off(INFO_RECEIVED_EVENT, onBiometryInfoReceived);\n  isMounted.set(false);\n}\n\n/**\n * Updates the biometric token in a secure storage on the device.\n * @since Mini Apps v7.2\n * @returns Promise with `true`, if token was updated.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @example Setting a new token\n * if (updateToken.isAvailable()) {\n *   updateToken({\n *     token: 'abcdef',\n *   })\n * }\n * @example Deleting the token\n * if (updateToken.isAvailable()) {\n *   updateToken();\n * }\n */\nexport const updateToken = wrapComplete(\n  'updateToken',\n  (options?: UpdateTokenOptions): CancelablePromise<BiometryTokenUpdateStatus> => {\n    options ||= {};\n    return request(UPDATE_TOKEN_METHOD, 'biometry_token_updated', {\n      ...options,\n      params: {\n        token: options.token || '',\n        reason: options.reason,\n      },\n    }).then(r => r.status);\n  },\n);\n", "import { createWrapSafe, type SafeWrapFn } from '@/scopes/toolkit/createWrapSafe.js';\n\nexport function createWrapMounted(\n  component: string,\n  isMounted: () => boolean,\n): SafeWrapFn<false> {\n  return createWrapSafe(component, { isMounted });\n}", "import { isPageReload } from '@telegram-apps/navigation';\nimport { getStorageValue, setStorageValue } from '@telegram-apps/bridge';\nimport { signal } from '@telegram-apps/signals';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { createWrapMounted } from '@/scopes/toolkit/createWrapMounted.js';\nimport { createWrapBasic } from '@/scopes/toolkit/createWrapBasic.js';\n\ntype StorageValue = boolean;\n\nconst COMPONENT_NAME = 'closingBehavior';\n\n/**\n * Signal indicating if the confirmation dialog should be shown, while the user\n * is trying to close the Mini App.\n */\nexport const isConfirmationEnabled = signal(false);\n\n/**\n * Signal indicating if the Closing Behavior component is currently mounted.\n */\nexport const isMounted = signal(false);\n\nconst wrapMounted = createWrapMounted(COMPONENT_NAME, isMounted);\nconst wrapBasic = createWrapBasic(COMPONENT_NAME);\n\n/**\n * Disables the closing confirmation dialog.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @example\n * if (disableConfirmation.isAvailable()) {\n *   disableConfirmation();\n * }\n */\nexport const disableConfirmation = wrapMounted('disableConfirmation', (): void => {\n  setClosingConfirmation(false);\n});\n\n/**\n * Enables the closing confirmation dialog.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @example\n * if (enableConfirmation.isAvailable()) {\n *   enableConfirmation();\n * }\n */\nexport const enableConfirmation = wrapMounted('enableConfirmation', (): void => {\n  setClosingConfirmation(true);\n});\n\n/**\n * Mounts the Closing Behavior component restoring its state.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @example\n * if (mount.isAvailable()) {\n *   mount();\n * }\n */\nexport const mount = wrapBasic('mount', (): void => {\n  if (!isMounted()) {\n    setClosingConfirmation(\n      isPageReload() && getStorageValue<StorageValue>(COMPONENT_NAME) || false,\n    );\n    isMounted.set(true);\n  }\n});\n\nfunction setClosingConfirmation(value: boolean): void {\n  if (value !== isConfirmationEnabled()) {\n    postEvent('web_app_setup_closing_behavior', { need_confirmation: value });\n    setStorageValue<StorageValue>(COMPONENT_NAME, value);\n    isConfirmationEnabled.set(value);\n  }\n}\n\n/**\n * Unmounts the Closing Behavior component.\n */\nexport function unmount(): void {\n  isMounted.set(false);\n}\n", "import {\n  CancelablePromise,\n  type ExecuteWithOptions,\n} from '@telegram-apps/bridge';\nimport { array, object, string } from '@telegram-apps/transformers';\n\nimport { invokeCustomMethod } from '@/scopes/globals.js';\nimport { createIsSupported } from '@/scopes/toolkit/createIsSupported.js';\nimport { createWrapSupported } from '@/scopes/toolkit/createWrapSupported.js';\n\nconst INVOKE_METHOD_NAME = 'web_app_invoke_custom_method';\nconst wrapSupported = createWrapSupported('cloudStorage', INVOKE_METHOD_NAME);\n\n/**\n * Signal indicating if the Cloud Storage is supported.\n */\nexport const isSupported = createIsSupported(INVOKE_METHOD_NAME);\n\n/**\n * Deletes specified key or keys from the cloud storage.\n * @param keyOrKeys - key or keys to delete.\n * @param options - request execution options.\n * @since Mini Apps v6.9\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example Deleting a single key\n * if (deleteItem.isAvailable()) {\n *   await deleteItem('my-key');\n * }\n * @example Deleting multiple keys\n * if (deleteItem.isAvailable()) {\n *   await deleteItem(['key1', 'key2']);\n * }\n */\nexport const deleteItem = wrapSupported('deleteItem', (\n  keyOrKeys: string | string[],\n  options?: ExecuteWithOptions,\n): CancelablePromise<void> => {\n  const keys = Array.isArray(keyOrKeys) ? keyOrKeys : [keyOrKeys];\n  return keys.length\n    ? invokeCustomMethod('deleteStorageValues', { keys }, options).then()\n    : CancelablePromise.resolve();\n});\n\n/**\n * Gets multiple keys' values from the cloud storage.\n * @param keys - keys list.\n * @param options - request execution options.\n * @returns Map, where a key is one of the specified in the `keys` argument,\n * and a value is a corresponding storage value.\n * @since Mini Apps v6.9\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (deleteItem.isAvailable()) {\n *   const { key1, key2 } = await getItem(['key1', 'key2']);\n * }\n */\nfunction _getItem<K extends string>(\n  keys: K[],\n  options?: ExecuteWithOptions,\n): CancelablePromise<Record<K, string>>;\n\n/**\n * Gets a single key value from the cloud storage.\n * @param key - cloud storage key.\n * @param options - request execution options.\n * @return Value of the specified key. If the key was not created previously,\n * the function will return an empty string.\n * @since Mini Apps v6.9\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (getItem.isAvailable()) {\n *   const keyValue = await getItem('my-key');\n * }\n */\nfunction _getItem(key: string, options?: ExecuteWithOptions): CancelablePromise<string>;\n\nfunction _getItem(\n  keyOrKeys: string | string[],\n  options?: ExecuteWithOptions,\n): CancelablePromise<string | Record<string, string>> {\n  const keys = Array.isArray(keyOrKeys) ? keyOrKeys : [keyOrKeys];\n\n  return keys.length\n    ? invokeCustomMethod('getStorageValues', { keys }, options).then(data => {\n      const result = object(\n        Object.fromEntries(keys.map((k) => [k, string()])),\n      )()(data);\n\n      return Array.isArray(keyOrKeys) ? result : result[keyOrKeys];\n    })\n    : CancelablePromise.resolve(typeof keyOrKeys === 'string' ? '' : {});\n}\n\nexport const getItem = wrapSupported('getItem', _getItem);\n\n/**\n * Returns a list of all keys presented in the cloud storage.\n * @param options - request execution options.\n * @since Mini Apps v6.9\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (getKeys.isAvailable()) {\n *   const keysArray = await getKeys();\n * }\n */\nexport const getKeys = wrapSupported('getKeys', (\n  options?: ExecuteWithOptions,\n): CancelablePromise<string[]> => {\n  return invokeCustomMethod('getStorageKeys', {}, options)\n    .then(array(string())());\n});\n\n/**\n * Saves the specified value by a key.\n * @param key - storage key.\n * @param value - storage value.\n * @param options - request execution options.\n * @since Mini Apps v6.9\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (setItem.isAvailable()) {\n *   await setItem('key', 'value');\n * }\n */\nexport const setItem = wrapSupported('setItem', (\n  key: string,\n  value: string,\n  options?: ExecuteWithOptions,\n): CancelablePromise<void> => {\n  return invokeCustomMethod('saveStorageValue', {\n    key,\n    value,\n  }, options).then();\n});\n", "import type {\n  ImpactHapticFeedbackStyle,\n  NotificationHapticFeedbackType,\n} from '@telegram-apps/bridge';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { createIsSupported } from '@/scopes/toolkit/createIsSupported.js';\nimport { createWrapSupported } from '@/scopes/toolkit/createWrapSupported.js';\n\nconst HAPTIC_METHOD_NAME = 'web_app_trigger_haptic_feedback';\nconst wrapSupported = createWrapSupported('hapticFeedback', HAPTIC_METHOD_NAME);\n\n/**\n * Signal indicating if the Haptic Feedback is supported.\n */\nexport const isSupported = createIsSupported(HAPTIC_METHOD_NAME);\n\n/**\n * A method that tells if an impact occurred. The Telegram app may play the\n * appropriate haptics based on style value passed.\n * @param style - impact style.\n * @since Mini Apps v6.1\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (impactOccurred.isAvailable()) {\n *   impactOccurred('medium');\n * }\n */\nexport const impactOccurred = wrapSupported(\n  'impactOccurred',\n  (style: ImpactHapticFeedbackStyle): void => {\n    postEvent(HAPTIC_METHOD_NAME, {\n      type: 'impact',\n      impact_style: style,\n    });\n  },\n);\n\n/**\n * A method tells that a task or action has succeeded, failed, or produced\n * a warning. The Telegram app may play the appropriate haptics based on type\n * value passed.\n * @param type - notification type.\n * @since Mini Apps v6.1\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (notificationOccurred.isAvailable()) {\n *   notificationOccurred('success');\n * }\n */\nexport const notificationOccurred = wrapSupported(\n  'notificationOccurred',\n  (type: NotificationHapticFeedbackType): void => {\n    postEvent(HAPTIC_METHOD_NAME, {\n      type: 'notification',\n      notification_type: type,\n    });\n  },\n);\n\n/**\n * A method tells that the user has changed a selection. The Telegram app may\n * play the appropriate haptics.\n *\n * Do not use this feedback when the user makes or confirms a selection; use\n * it only when the selection changes.\n * @since Mini Apps v6.1\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (selectionChanged.isAvailable()) {\n *   selectionChanged();\n * }\n */\nexport const selectionChanged = wrapSupported(\n  'selectionChanged',\n  (): void => {\n    postEvent(HAPTIC_METHOD_NAME, { type: 'selection_change' });\n  },\n);\n", "import { computed, type Computed, signal } from '@telegram-apps/signals';\nimport { type InitData, retrieveLaunchParams } from '@telegram-apps/bridge';\n\n/* USUAL */\n\n/**\n * Complete component state.\n */\nexport const state = signal<InitData | undefined>(undefined);\n\n/* COMPUTED */\n\nfunction fromState<K extends keyof InitData>(key: K): Computed<InitData[K] | undefined> {\n  return computed(() => {\n    const s = state();\n    return s ? s[key] : undefined;\n  });\n}\n\n/**\n * @see InitData.authDate\n */\nexport const authDate = fromState('authDate');\n\n/**\n * @see InitData.canSendAfter\n */\nexport const canSendAfter = fromState('canSendAfter');\n\n/**\n * Date after which it is allowed to call\n * the [answerWebAppQuery](https://core.telegram.org/bots/api#answerwebappquery) method.\n */\nexport const canSendAfterDate = computed(() => {\n  const authDateValue = authDate();\n  const canSendAfterValue = canSendAfter();\n\n  return canSendAfterValue && authDateValue\n    ? new Date(authDateValue.getTime() + canSendAfterValue * 1000)\n    : undefined\n});\n\n/**\n * @see InitData.chat\n */\nexport const chat = fromState('chat');\n\n/**\n * @see InitData.chatType\n */\nexport const chatType = fromState('chatType');\n\n/**\n * @see InitData.chatInstance\n */\nexport const chatInstance = fromState('chatInstance');\n\n/**\n * @see InitData.hash\n */\nexport const hash = fromState('hash');\n\n/**\n * @see InitData.queryId\n */\nexport const queryId = fromState('queryId');\n\n/**\n * Raw representation of init data.\n */\nexport const raw = signal<string | undefined>();\n\n/**\n * @see InitData.receiver\n */\nexport const receiver = fromState('receiver');\n\n/**\n * Restores the component state.\n */\nexport function restore(): void {\n  const lp = retrieveLaunchParams();\n  state.set(lp.initData);\n  raw.set(lp.initDataRaw);\n}\n\n/**\n * @see InitData.startParam\n */\nexport const startParam = fromState('startParam');\n\n/**\n * @see InitData.user\n */\nexport const user = fromState('user');", "import { initData } from '@telegram-apps/transformers';\nimport type { InitData } from '@telegram-apps/bridge';\n\n/**\n * Parses an incoming value as init data.\n * @param value - value to check.\n * @throws {} Parsing errors.\n */\nexport function parseInitData(value: unknown): InitData {\n  return initData()(value);\n}", "import {\n  TypedError,\n  type InvoiceStatus,\n  type ExecuteWithPostEvent,\n} from '@telegram-apps/bridge';\nimport { signal } from '@telegram-apps/signals';\n\nimport { request } from '@/scopes/globals.js';\nimport { createIsSupported } from '@/scopes/toolkit/createIsSupported.js';\nimport { createWrapSupported } from '@/scopes/toolkit/createWrapSupported.js';\nimport {\n  ERR_INVALID_URL,\n  ERR_INVALID_SLUG,\n  ERR_ALREADY_OPENED,\n} from '@/errors.js';\n\nconst OPEN_METHOD = 'web_app_open_invoice';\nconst wrapSupported = createWrapSupported('invoice', OPEN_METHOD);\n\n/**\n * Signal indicating if an invoice is opened.\n */\nexport const isOpened = signal(false);\n\n/**\n * Signal indicating if invoices are supported.\n */\nexport const isSupported = createIsSupported(OPEN_METHOD);\n\n/**\n * Opens an invoice using its slug.\n * @param slug - invoice slug.\n * @param options - additional options.\n * @since Mini Apps v6.1\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_ALREADY_OPENED\n * @example\n * if (open.isAvailable()) {\n *   const status = await open('kJNFS331');\n * }\n */\nexport function _open(\n  slug: string,\n  options?: ExecuteWithPostEvent,\n): Promise<InvoiceStatus>;\n\n/**\n * Opens an invoice using its url.\n * @param url - invoice URL.\n * @param type - value type.\n * @param options - additional options.\n * @since Mini Apps v6.1\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_ALREADY_OPENED\n * @throws {TypedError} ERR_INVALID_URL\n * @throws {TypedError} ERR_INVALID_SLUG\n * @example\n * if (open.isAvailable()) {\n *   const status = await open('https://t.me/$kJNFS331', 'url');\n * }\n * @example\n * if (open.isAvailable()) {\n *   const status = await open('https://t.me/invoice/kJNFS331', 'url');\n * }\n */\nexport function _open(\n  url: string,\n  type: 'url',\n  options?: ExecuteWithPostEvent,\n): Promise<InvoiceStatus>;\n\nexport async function _open(\n  urlOrSlug: string,\n  optionsOrType?: 'url' | ExecuteWithPostEvent,\n  options?: ExecuteWithPostEvent,\n): Promise<InvoiceStatus> {\n  if (isOpened()) {\n    throw new TypedError(ERR_ALREADY_OPENED, 'An invoice is already opened');\n  }\n\n  let slug: string;\n\n  if (optionsOrType === 'url') {\n    const { hostname, pathname } = new URL(urlOrSlug, window.location.href);\n    if (hostname !== 't.me') {\n      throw new TypedError(ERR_INVALID_URL, `Link has unexpected hostname: ${hostname}`);\n    }\n\n    // Valid examples:\n    // \"/invoice/my-slug\"\n    // \"/$my-slug\"\n    const match = pathname.match(/^\\/(\\$|invoice\\/)([A-Za-z0-9\\-_=]+)$/);\n    if (!match) {\n      throw new TypedError(\n        ERR_INVALID_SLUG,\n        `Expected to receive a link with a pathname in format \"/invoice/{slug}\" or \"/\\${slug}\"`,\n      );\n    }\n    [, , slug] = match;\n  } else {\n    // todo: validate slug?\n    slug = urlOrSlug;\n    options = optionsOrType;\n  }\n\n  isOpened.set(true);\n\n  return request(OPEN_METHOD, 'invoice_closed', {\n    ...options,\n    params: { slug },\n    capture: (data) => slug === data.slug,\n  })\n    .then(r => r.status)\n    .finally(() => {\n      isOpened.set(false);\n    });\n}\n\nexport const open = wrapSupported('open', _open);\n", "import { toRGB } from '@telegram-apps/transformers';\n\n/**\n * @param color - color in any format acceptable by the `toRGB` function.\n * @returns True if the color is recognized as dark.\n * @see toRGB\n */\nexport function isColorDark(color: string): boolean {\n  const rgb = toRGB(color);\n\n  // Real formula: hsp = Math.sqrt(0.299 * r * r + 0.587 * g * g + 0.114 * b * b)\n  // See: https://stackoverflow.com/a/596243\n  return Math.sqrt(\n    [0.299, 0.587, 0.114].reduce<number>((acc, modifier, idx) => {\n      // Extract part of #RRGGBB pattern and convert it to DEC.\n      const dec = parseInt(rgb.slice(1 + idx * 2, 1 + (idx + 1) * 2), 16);\n      return acc + dec * dec * modifier;\n    }, 0),\n  ) < 120;\n}\n", "import type { ThemeParams } from '@telegram-apps/bridge';\nimport { computed, type Computed, signal } from '@telegram-apps/signals';\n\nimport { isColorDark } from '@/utils/isColorDark.js';\n\n/**\n * True if the component is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * True if CSS variables are currently bound.\n */\nexport const isCssVarsBound = signal(false);\n\n/**\n * Complete component state.\n */\nexport const state = signal<ThemeParams>({});\n\nfunction fromState<K extends keyof ThemeParams>(key: K): Computed<ThemeParams[K] | undefined> {\n  return computed(() => state()[key]);\n}\n\n/**\n * @since v6.10\n */\nexport const accentTextColor = fromState('accentTextColor');\n\nexport const backgroundColor = fromState('bgColor');\n\nexport const buttonColor = fromState('buttonColor');\n\nexport const buttonTextColor = fromState('buttonTextColor');\n\n/**\n * @since v7.10\n */\nexport const bottomBarBgColor = fromState('bottomBarBgColor');\n\nexport const destructiveTextColor = fromState('destructiveTextColor');\n\n/**\n * @since v6.10\n */\nexport const headerBackgroundColor = fromState('headerBgColor');\n\nexport const hintColor = fromState('hintColor');\n\n/**\n * @returns True if the current color scheme is recognized as dark.\n * This value is calculated based on the current theme's background color.\n */\nexport const isDark = computed(() => {\n  const { bgColor } = state();\n  return !bgColor || isColorDark(bgColor);\n});\n\nexport const linkColor = fromState('linkColor');\n\nexport const secondaryBackgroundColor = fromState('secondaryBgColor');\n\n/**\n * @since v6.10\n */\nexport const sectionBackgroundColor = fromState('sectionBgColor');\n\n/**\n * @since v6.10\n */\nexport const sectionHeaderTextColor = fromState('sectionHeaderTextColor');\n\n/**\n * @since v7.6\n */\nexport const sectionSeparatorColor = fromState('sectionSeparatorColor');\n\n/**\n * @since v6.10\n */\nexport const subtitleTextColor = fromState('subtitleTextColor');\n\nexport const textColor = fromState('textColor');\n", "import { computed, type Computed, signal } from '@telegram-apps/signals';\n\nimport {\n  buttonColor,\n  buttonTextColor,\n} from '@/scopes/components/theme-params/signals.js';\n\nimport type { State } from './types.js';\n\nfunction fromState<K extends keyof Required<State>>(\n  key: K,\n): Computed<Required<State>[K]> {\n  return computed(() => state()[key]);\n}\n\nexport const internalState = signal<State>({\n  hasShineEffect: false,\n  isEnabled: true,\n  isLoaderVisible: false,\n  isVisible: false,\n  text: 'Continue',\n});\n\n/**\n * Complete component state.\n */\nexport const state = computed<Required<State>>(() => {\n  const s = internalState();\n  return {\n    ...s,\n    backgroundColor: s.backgroundColor || buttonColor() || '#2481cc',\n    textColor: s.textColor || buttonTextColor() || '#ffffff',\n  };\n});\n\n/**\n * Signal indicating if the Main Button is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * Signal containing the current Main Button background color.\n */\nexport const backgroundColor = fromState('backgroundColor');\n\n/**\n * Signal indicating if the Main Button has a shining effect.\n */\nexport const hasShineEffect = fromState('hasShineEffect');\n\n/**\n * Signal indicating if the Main Button is currently active and can be clicked.\n */\nexport const isEnabled = fromState('isEnabled');\n\n/**\n * Signal indicating if the Main Button displays a loader inside it.\n */\nexport const isLoaderVisible = fromState('isLoaderVisible');\n\n/**\n * Signal indicating if the Main Button is currently visible.\n */\nexport const isVisible = fromState('isVisible');\n\n/**\n * Signal containing the Main Button text.\n */\nexport const text = fromState('text');\n\n/**\n * Signal containing the current Main Button text color.\n */\nexport const textColor = fromState('textColor');\n", "import {\n  off,\n  on,\n  getStorageValue,\n  setStorageValue,\n  type EventListener,\n} from '@telegram-apps/bridge';\nimport { isPageReload } from '@telegram-apps/navigation';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { createWrapBasic } from '@/scopes/toolkit/createWrapBasic.js';\nimport { createWrapMounted } from '@/scopes/toolkit/createWrapMounted.js';\n\nimport { internalState, isMounted, state } from './signals.js';\nimport type { State } from './types.js';\n\ntype StorageValue = State;\n\nconst SETUP_METHOD_NAME = 'web_app_setup_main_button';\nconst CLICK_EVENT_NAME = 'main_button_pressed';\nconst COMPONENT_NAME = 'mainButton';\n\nconst wrapBasic = createWrapBasic(COMPONENT_NAME);\nconst wrapMounted = createWrapMounted(COMPONENT_NAME, isMounted);\n\n/**\n * Mounts the Main Button restoring its state.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @example\n * if (mount.isAvailable()) {\n *   mount();\n * }\n */\nexport const mount = wrapBasic('mount', (): void => {\n  if (!isMounted()) {\n    const prev = isPageReload() && getStorageValue<StorageValue>(COMPONENT_NAME);\n    prev && internalState.set(prev);\n    isMounted.set(true);\n  }\n});\n\n/**\n * Adds a new Main Button click listener.\n * @param fn - event listener.\n * @returns A function to remove bound listener.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @example\n * if (onClick.isAvailable()) {\n *   const off = onClick(() => {\n *     console.log('User clicked the Main Button');\n *     off();\n *   });\n * }\n */\nexport const onClick = wrapBasic(\n  'onClick',\n  (fn: EventListener<'main_button_pressed'>): VoidFunction => {\n    return on(CLICK_EVENT_NAME, fn);\n  },\n);\n\n/**\n * Removes the Main Button click listener.\n * @param fn - an event listener.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @example\n * if (offClick.isAvailable()) {\n *   function listener() {\n *     console.log('User clicked the Main Button');\n *     offClick(listener);\n *   }\n *   onClick(listener);\n * }\n */\nexport const offClick = wrapBasic(\n  'offClick',\n  (fn: EventListener<'main_button_pressed'>): void => {\n    off(CLICK_EVENT_NAME, fn);\n  },\n);\n\n/**\n * Updates the Main Button state.\n * @param updates - state changes to perform.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @example\n * if (setParams.isAvailable()) {\n *   setParams({\n *     text: 'Submit',\n *     isEnabled: true,\n *     hasShineEffect: true,\n *   });\n * }\n */\nexport const setParams = wrapMounted(\n  'setParams',\n  (updates: Partial<State>): void => {\n    internalState.set({\n      ...internalState(),\n      ...Object.fromEntries(\n        Object.entries(updates).filter(([, v]) => v !== undefined),\n      ),\n    });\n    setStorageValue<StorageValue>(COMPONENT_NAME, internalState());\n\n    // We should not commit changes until the payload is correct.\n    // Some version of Telegram will crash due to the empty value of the text.\n    const s = state();\n    s.text && postEvent(SETUP_METHOD_NAME, {\n      color: s.backgroundColor,\n      has_shine_effect: s.hasShineEffect,\n      is_active: s.isEnabled,\n      is_progress_visible: s.isLoaderVisible,\n      is_visible: s.isVisible,\n      text: s.text,\n      text_color: s.textColor,\n    });\n  },\n);\n\n/**\n * Unmounts the Main Button.\n *\n * Note that this function does not remove listeners added via the `onClick`\n * function, so you have to remove them on your own.\n * @see onClick\n */\nexport function unmount(): void {\n  isMounted.set(false);\n}\n", "import { TypedError } from '@telegram-apps/bridge';\n\nimport { ERR_CSS_VARS_ALREADY_BOUND } from '@/errors.js';\n\n/**\n * @throws {TypedError} ERR_CSS_VARS_ALREADY_BOUND\n */\nexport function throwCssVarsBound(): never {\n  throw new TypedError(\n    ERR_CSS_VARS_ALREADY_BOUND,\n    'CSS variables are already bound',\n  );\n}", "import { themeParams } from '@telegram-apps/transformers';\nimport type { ThemeParams } from '@telegram-apps/bridge';\n\n/**\n * Parses incoming value as theme parameters.\n * @param value - value to parse.\n */\nexport function parseThemeParams(value: unknown): ThemeParams {\n  return themeParams()(value);\n}\n", "import {\n  off,\n  on,\n  camelToKebab,\n  getStorageValue,\n  setStorageValue,\n  retrieveLaunchParams,\n  deleteCssVar,\n  setCssVar,\n  type EventListener,\n  type RGB,\n  type ThemeParams,\n} from '@telegram-apps/bridge';\nimport { isPageReload } from '@telegram-apps/navigation';\n\nimport { throwCssVarsBound } from '@/scopes/toolkit/throwCssVarsBound.js';\nimport { createWrapMounted } from '@/scopes/toolkit/createWrapMounted.js';\nimport { createWrapBasic } from '@/scopes/toolkit/createWrapBasic.js';\n\nimport { isCssVarsBound, state, isMounted } from './signals.js';\nimport { parseThemeParams } from './parseThemeParams.js';\nimport type { GetCssVarNameFn } from './types.js';\n\ntype StorageValue = ThemeParams;\n\nconst COMPONENT_NAME = 'themeParams';\nconst THEME_CHANGED_EVENT = 'theme_changed';\n\nconst wrapBasic = createWrapBasic(COMPONENT_NAME);\nconst wrapMounted = createWrapMounted(COMPONENT_NAME, isMounted);\n\n/**\n * Creates CSS variables connected with the current theme parameters.\n *\n * By default, created CSS variables names are following the pattern \"--tg-theme-{name}\", where\n * {name} is a theme parameters key name converted from camel case to kebab case.\n *\n * Default variables:\n * - `--tg-theme-bg-color`\n * - `--tg-theme-secondary-text-color`\n *\n * Variables are being automatically updated if theme parameters were changed.\n *\n * @param getCSSVarName - function, returning complete CSS variable name for the specified\n * theme parameters key.\n * @returns Function to stop updating variables.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_CSS_VARS_ALREADY_BOUND\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @example Using no arguments\n * if (bindCssVars.isAvailable()) {\n *   bindCssVars();\n * }\n * @example Using custom CSS vars generator\n * if (bindCssVars.isAvailable()) {\n *   bindCssVars(key => `--my-prefix-${key}`);\n * }\n */\nexport const bindCssVars = wrapMounted(\n  'bindCssVars',\n  (getCSSVarName?: GetCssVarNameFn): VoidFunction => {\n    isCssVarsBound() && throwCssVarsBound();\n\n    getCSSVarName ||= (prop) => `--tg-theme-${camelToKebab(prop)}`;\n\n    function forEachEntry(fn: (key: string, value: RGB) => void): void {\n      Object.entries(state()).forEach(([k, v]) => {\n        v && fn(k, v);\n      });\n    }\n\n    function actualize(): void {\n      forEachEntry((k, v) => {\n        setCssVar(getCSSVarName!(k), v);\n      });\n    }\n\n    actualize();\n    state.sub(actualize);\n    isCssVarsBound.set(true);\n\n    return () => {\n      forEachEntry(deleteCssVar);\n      state.unsub(actualize);\n      isCssVarsBound.set(false);\n    };\n  },\n);\n\n/**\n * Mounts the Theme Params component restoring its state.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (mount.isAvailable()) {\n *   mount();\n * }\n */\nexport const mount = wrapBasic('mount', (): void => {\n  if (!isMounted()) {\n    on(THEME_CHANGED_EVENT, onThemeChanged);\n    state.set(\n      isPageReload()\n      && getStorageValue<StorageValue>(COMPONENT_NAME)\n      || retrieveLaunchParams().themeParams,\n    );\n    isMounted.set(true);\n  }\n});\n\nconst onThemeChanged: EventListener<'theme_changed'> = (e) => {\n  const value = parseThemeParams(e.theme_params);\n  state.set(value);\n  setStorageValue<StorageValue>(COMPONENT_NAME, value);\n};\n\n/**\n * Unmounts the Theme Params component.\n */\nexport function unmount(): void {\n  off(THEME_CHANGED_EVENT, onThemeChanged);\n  isMounted.set(false);\n}\n", "import { Computed, computed, signal } from '@telegram-apps/signals';\nimport { isRGB } from '@telegram-apps/transformers';\nimport type { BackgroundColor, BottomBarColor, RGB } from '@telegram-apps/bridge';\n\nimport { isColorDark } from '@/utils/isColorDark.js';\nimport {\n  backgroundColor as themeBgColor,\n  secondaryBackgroundColor as themeSecondaryBgColor,\n  bottomBarBgColor as themeBottomBarBgColor,\n} from '@/scopes/components/theme-params/signals.js';\n\nimport type { HeaderColor, State } from './types.js';\n\n// #__NO_SIDE_EFFECTS__\nfunction rgbBasedOn(signal: Computed<'bg_color' | 'secondary_bg_color' | RGB>) {\n  return computed<RGB | undefined>(() => {\n    const color = signal();\n\n    return isRGB(color) ? color : color === 'bg_color'\n      ? themeBgColor()\n      : themeSecondaryBgColor();\n  });\n}\n\n/**\n * The Mini App background color.\n */\nexport const backgroundColor = signal<BackgroundColor>('bg_color');\n\n/**\n * RGB representation of the background color.\n *\n * This value requires the Theme Params component to be mounted to extract a valid RGB value\n * of the color key.\n */\nexport const backgroundColorRGB = rgbBasedOn(backgroundColor);\n\n\n/**\n * The Mini App bottom bar background color.\n */\nexport const bottomBarColor = signal<BottomBarColor>('bottom_bar_bg_color');\n\n/**\n * RGB representation of the bottom bar background color.\n *\n * This value requires the Theme Params component to be mounted to extract a valid RGB value\n * of the color key.\n */\nexport const bottomBarColorRGB = computed<RGB | undefined>(() => {\n  const color = bottomBarColor();\n  return isRGB(color)\n    ? color\n    : color === 'bottom_bar_bg_color'\n      // Following the logic from the Telegram SDK.\n      // I removed \"|| '#ffffff'\" because this seems too strange to me. This is just not right.\n      ? themeBottomBarBgColor() || themeSecondaryBgColor()\n      : color === 'secondary_bg_color'\n        ? themeSecondaryBgColor()\n        : themeBgColor();\n});\n\n/**\n * The Mini App header color.\n */\nexport const headerColor = signal<HeaderColor>('bg_color');\n\n/**\n * RGB representation of the header color.\n *\n * This value requires the Theme Params component to be mounted to extract a valid RGB value\n * of the color key.\n */\nexport const headerColorRGB = rgbBasedOn(headerColor);\n\n/**\n * True if the component is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * True if CSS variables are currently bound.\n */\nexport const isCssVarsBound = signal(false);\n\n/**\n * True if the current Mini App background color is recognized as dark.\n */\nexport const isDark = computed(() => {\n  const color = backgroundColorRGB();\n  return color ? isColorDark(color) : false;\n});\n\n/**\n * Complete component state.\n */\nexport const state = computed<State>(() => ({\n  backgroundColor: backgroundColor(),\n  bottomBarColor: bottomBarColor(),\n  headerColor: headerColor(),\n}));\n", "import {\n  getStorageValue,\n  setStorageValue,\n  createCbCollector,\n  camelToKebab,\n  deleteCssVar,\n  setCssVar,\n  supports,\n  type RGB,\n  type BottomBarColor,\n  type BackgroundColor, MethodName,\n} from '@telegram-apps/bridge';\nimport { isRGB } from '@telegram-apps/transformers';\nimport { isPageReload } from '@telegram-apps/navigation';\nimport { computed, type Computed } from '@telegram-apps/signals';\n\nimport { $version, postEvent } from '@/scopes/globals.js';\nimport { mount as tpMount } from '@/scopes/components/theme-params/methods.js';\nimport { throwCssVarsBound } from '@/scopes/toolkit/throwCssVarsBound.js';\nimport { createWrapComplete } from '@/scopes/toolkit/createWrapComplete.js';\nimport { createWrapSupported } from '@/scopes/toolkit/createWrapSupported.js';\nimport { createWrapBasic } from '@/scopes/toolkit/createWrapBasic.js';\n\nimport {\n  headerColor,\n  backgroundColor,\n  isCssVarsBound,\n  state,\n  isMounted,\n  bottomBarColor,\n  headerColorRGB,\n  bottomBarColorRGB,\n  backgroundColorRGB,\n} from './signals.js';\nimport type { GetCssVarNameFn, HeaderColor, State } from './types.js';\n\ntype StorageValue = State;\n\nconst SET_BG_COLOR_METHOD = 'web_app_set_background_color';\nconst SET_BOTTOM_BAR_COLOR_METHOD = 'web_app_set_bottom_bar_color';\nconst SET_HEADER_COLOR_METHOD = 'web_app_set_header_color';\nconst COMPONENT_NAME = 'miniApp';\n\nconst isSupportedSchema = {\n  any: [\n    SET_BG_COLOR_METHOD,\n    SET_BOTTOM_BAR_COLOR_METHOD,\n    SET_HEADER_COLOR_METHOD,\n  ] as MethodName[],\n};\n\n/**\n * True if the Mini App component is supported.\n */\nexport const isSupported = computed(() => {\n  return isSupportedSchema.any.some(method => supports(method, $version()));\n});\n\nconst wrapBasic = createWrapBasic(COMPONENT_NAME);\nconst wrapSupported = createWrapSupported(COMPONENT_NAME, isSupportedSchema);\nconst wrapComplete = createWrapComplete(COMPONENT_NAME, isMounted, isSupportedSchema);\n\n/**\n * Creates CSS variables connected with the mini app.\n *\n * Default variables:\n * - `--tg-bg-color`\n * - `--tg-header-color`\n * - `--tg-bottom-bar-color`\n *\n * Variables are being automatically updated if theme parameters were changed.\n *\n * @param getCSSVarName - function, returning complete CSS variable name for the specified\n * mini app key.\n * @returns Function to stop updating variables.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_VARS_ALREADY_BOUND\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @example Using no arguments\n * if (bindCssVars.isAvailable()) {\n *   bindCssVars();\n * }\n * @example Using custom CSS vars generator\n * if (bindCssVars.isAvailable()) {\n *   bindCssVars(key => `--my-prefix-${key}`);\n * }\n */\nexport const bindCssVars = wrapComplete(\n  'bindCssVars',\n  (getCSSVarName?: GetCssVarNameFn): VoidFunction => {\n    isCssVarsBound() && throwCssVarsBound();\n\n    const [addCleanup, cleanup] = createCbCollector();\n\n    /**\n     * Binds specified CSS variable to a signal.\n     * @param cssVar - CSS variable name.\n     * @param signal - signal to listen changes to.\n     */\n    function bind(cssVar: string, signal: Computed<RGB | undefined>) {\n      function update() {\n        setCssVar(cssVar, signal() || null);\n      }\n\n      // Instantly set CSS variable.\n      update();\n\n      // Remember to clean this relation up.\n      addCleanup(signal.sub(update), deleteCssVar.bind(null, cssVar));\n    }\n\n    getCSSVarName ||= (prop) => `--tg-${camelToKebab(prop)}`;\n    bind(getCSSVarName('bgColor'), backgroundColorRGB);\n    bind(getCSSVarName('bottomBarColor'), bottomBarColorRGB);\n    bind(getCSSVarName('headerColor'), headerColorRGB);\n    addCleanup(() => {\n      isCssVarsBound.set(false);\n    });\n\n    isCssVarsBound.set(true);\n\n    return cleanup;\n  },\n);\n\n/**\n * Closes the Mini App.\n * @param returnBack - should the client return to the previous activity.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @example\n * if (close.isAvailable()) {\n *   close();\n * }\n */\nexport const close = wrapBasic('close', (returnBack?: boolean): void => {\n  postEvent('web_app_close', { return_back: returnBack });\n});\n\n/**\n * Mounts the component.\n *\n * This function restores the component state and is automatically saving it in the local storage\n * if it changed.\n *\n * Internally, the function mounts the Theme Params component to work with correctly extracted\n * theme palette values.\n * @since Mini Apps v6.1\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (mount.isAvailable()) {\n *   mount();\n * }\n */\nexport const mount = wrapSupported(\n  'mount',\n  (): void => {\n    if (!isMounted()) {\n      const s = isPageReload() && getStorageValue<StorageValue>(COMPONENT_NAME);\n      tpMount();\n\n      setBackgroundColor.ifAvailable(s ? s.backgroundColor : 'bg_color');\n      setBottomBarColor.ifAvailable(s ? s.bottomBarColor : 'bottom_bar_bg_color');\n      setHeaderColor.ifAvailable(s ? s.headerColor : 'bg_color');\n\n      isMounted.set(true);\n    }\n  },\n);\n\n/**\n * Informs the Telegram app that the Mini App is ready to be displayed.\n *\n * It is recommended to call this method as early as possible, as soon as all\n * essential interface elements loaded.\n *\n * Once this method is called, the loading placeholder is hidden and the Mini\n * App shown.\n *\n * If the method is not called, the placeholder will be hidden only when the\n * page was fully loaded.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @example\n * if (ready.isAvailable()) {\n *   ready();\n * }\n */\nexport const ready = wrapBasic('ready', (): void => {\n  postEvent('web_app_ready');\n});\n\nfunction saveState() {\n  setStorageValue<StorageValue>(COMPONENT_NAME, state());\n}\n\n/**\n * Updates the background color.\n * @since Mini Apps v6.1\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @example\n * if (setBackgroundColor.isAvailable()) {\n *   setBackgroundColor('bg_color');\n * }\n */\nexport const setBackgroundColor = wrapComplete(\n  'setBackgroundColor',\n  (color: BackgroundColor): void => {\n    if (color !== backgroundColor()) {\n      postEvent(SET_BG_COLOR_METHOD, { color });\n      backgroundColor.set(color);\n      saveState();\n    }\n  },\n  SET_BG_COLOR_METHOD,\n);\n\n/**\n * Updates the bottom bar background color.\n * @since Mini Apps v7.10\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @example\n * if (setBottomBarColor.isAvailable()) {\n *   setBottomBarColor('ff11a3');\n * }\n */\nexport const setBottomBarColor = wrapComplete(\n  'setBottomBarColor',\n  (color: BottomBarColor) => {\n    if (color !== bottomBarColor()) {\n      postEvent(SET_BOTTOM_BAR_COLOR_METHOD, { color });\n      bottomBarColor.set(color);\n      saveState();\n    }\n  },\n  SET_BOTTOM_BAR_COLOR_METHOD,\n);\n\n/**\n * Updates the header color.\n * @since Mini Apps v6.1\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @example Using known color key\n * if (setHeaderColor.isAvailable()) {\n *   setHeaderColor('bg_color');\n * }\n * @example Using RGB\n * if (setHeaderColor.isAvailable() && setHeaderColor.supports.rgb()) {\n *   setHeaderColor('#ffaabb');\n * }\n */\nexport const setHeaderColor = wrapComplete(\n  'setHeaderColor',\n  (color: HeaderColor): void => {\n    if (color !== headerColor()) {\n      postEvent(SET_HEADER_COLOR_METHOD, isRGB(color) ? { color } : { color_key: color });\n      headerColor.set(color);\n      saveState();\n    }\n  },\n  SET_HEADER_COLOR_METHOD,\n  {\n    rgb: [SET_HEADER_COLOR_METHOD, 'color', isRGB],\n  },\n);\n\n/**\n * Unmounts the component, removing the listener, saving the component state in the local storage.\n */\nexport function unmount(): void {\n  isMounted.set(false);\n}\n", "import { type PopupParams, TypedError } from '@telegram-apps/bridge';\n\nimport { ERR_POPUP_INVALID_PARAMS } from '@/errors.js';\n\nimport type { OpenOptions } from './types.js';\n\n/**\n * Prepares popup parameters before sending them to native app.\n * @param params - popup parameters.\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid title\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid message\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid buttons count\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid button id length\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid button text length\n */\nexport function prepareParams(params: OpenOptions): PopupParams {\n  const message = params.message.trim();\n  const title = (params.title || '').trim();\n  const buttons = params.buttons || [];\n\n  if (title.length > 64) {\n    throw new TypedError(ERR_POPUP_INVALID_PARAMS, `Invalid title: ${title}`);\n  }\n  if (!message || message.length > 256) {\n    throw new TypedError(ERR_POPUP_INVALID_PARAMS, `Invalid message: ${message}`);\n  }\n  if (buttons.length > 3) {\n    throw new TypedError(ERR_POPUP_INVALID_PARAMS, `Invalid buttons count: ${buttons.length}`);\n  }\n\n  return {\n    title,\n    message,\n    buttons: buttons.length\n      ? buttons.map((b, idx) => {\n        const id = b.id || '';\n        if (id.length > 64) {\n          throw new TypedError(ERR_POPUP_INVALID_PARAMS, `Button with index ${idx} has invalid id: ${id}`);\n        }\n\n        if (!b.type || b.type === 'default' || b.type === 'destructive') {\n          const text = b.text.trim();\n          if (!text || text.length > 64) {\n            throw new TypedError(ERR_POPUP_INVALID_PARAMS, `Button with index ${idx} has invalid text: ${text}`);\n          }\n          return { type: b.type, text, id };\n        }\n        return { type: b.type, id };\n      })\n      : [{ type: 'close', id: '' }],\n  };\n}", "import { TypedError } from '@telegram-apps/bridge';\nimport { signal } from '@telegram-apps/signals';\n\nimport { request } from '@/scopes/globals.js';\nimport { ERR_ALREADY_OPENED } from '@/errors.js';\nimport { createIsSupported } from '@/scopes/toolkit/createIsSupported.js';\nimport { createWrapSupported } from '@/scopes/toolkit/createWrapSupported.js';\n\nimport { prepareParams } from './prepareParams.js';\nimport type { OpenOptions } from './types.js';\n\nconst OPEN_METHOD = 'web_app_open_popup';\nconst wrapSupported = createWrapSupported('popup', OPEN_METHOD);\n\n/**\n * Signal indicating if a popup is opened.\n */\nexport const isOpened = signal(false);\n\n/**\n * Signal indicating if popups are supported.\n */\nexport const isSupported = createIsSupported(OPEN_METHOD);\n\n/**\n * A method that shows a native popup described by the `params` argument.\n * The promise will be resolved when the popup is closed. Resolved value will have\n * an identifier of the pressed button.\n *\n * If a user clicked outside the popup or clicked the top right popup close\n * button, null will be resolved.\n *\n * @param options - popup parameters.\n * @since Mini Apps v6.2\n * @throws {TypedError} ERR_ALREADY_OPENED\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid title\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid message\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid buttons count\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid button id length\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid button text length\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (open.isAvailable()) {\n *   const buttonId = await open({\n *     title: 'Confirm action',\n *     message: 'Do you really want to buy this burger?',\n *     buttons: [\n *       { id: 'yes', text: 'Yes' },\n *       { id: 'no', type: 'destructive', text: 'No' },\n *     ],\n *   });\n * }\n */\nexport const open = wrapSupported(\n  'open',\n  async (options: OpenOptions): Promise<string | null> => {\n    if (isOpened()) {\n      throw new TypedError(ERR_ALREADY_OPENED, 'A popup is already opened');\n    }\n    isOpened.set(true);\n\n    try {\n      const { button_id: buttonId = null } = await request(OPEN_METHOD, 'popup_closed', {\n        ...options,\n        params: prepareParams(options),\n      });\n      return buttonId;\n    } finally {\n      isOpened.set(false);\n    }\n  },\n);", "import {\n  CancelablePromise,\n  createCbCollector,\n  TypedError,\n  on,\n  EnhancedPromise,\n  type ExecuteWithOptions,\n} from '@telegram-apps/bridge';\nimport { signal } from '@telegram-apps/signals';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { ERR_ALREADY_OPENED } from '@/errors.js';\nimport { createIsSupported } from '@/scopes/toolkit/createIsSupported.js';\nimport { createWrapSupported } from '@/scopes/toolkit/createWrapSupported.js';\n\ninterface OpenSharedOptions extends ExecuteWithOptions {\n  /**\n   * Title to be displayed in the scanner.\n   */\n  text?: string;\n}\n\nconst CLOSE_METHOD = 'web_app_close_scan_qr_popup';\nconst OPEN_METHOD = 'web_app_open_scan_qr_popup';\nconst CLOSED_EVENT = 'scan_qr_popup_closed';\nconst TEXT_RECEIVED_EVENT = 'qr_text_received';\n\nconst wrapSupported = createWrapSupported('qrScanner', OPEN_METHOD);\n\n/**\n * Closes the scanner.\n * @since Mini Apps v6.4\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (close.isAvailable()) {\n *   close();\n * }\n */\nexport const close = wrapSupported('close', (): void => {\n  isOpened.set(false);\n  postEvent(CLOSE_METHOD);\n});\n\n/**\n * True if the scanner is currently opened.\n */\nexport const isOpened = signal(false);\n\n/**\n * Signal indicating if the QR Scanner is currently opened.\n */\nexport const isSupported = createIsSupported(OPEN_METHOD);\n\n/**\n * Opens the scanner and returns a promise which will be resolved with the QR\n * content if the passed `capture` function returned true.\n *\n * The `capture` option may be ommited. In this case, the first scanned QR\n * will be returned.\n *\n * Promise may also be resolved to undefined if the scanner was closed.\n * @param options - method options.\n * @returns A promise with QR content presented as string or undefined if the\n * scanner was closed.\n * @since Mini Apps v6.4\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_ALREADY_OPENED\n * @example Without `capture` option\n * if (open.isAvailable()) {\n *   const qr = await open({ text: 'Scan any QR' });\n * }\n * @example Using `capture` option\n * if (open.isAvailable()) {\n *   const qr = await open({\n *     text: 'Scan any QR',\n *     capture(scannedQr) {\n *       return scannedQr === 'any expected by me qr';\n *     }\n *   });\n * }\n */\nfunction _open(options?: OpenSharedOptions & {\n  /**\n   * Function, which should return true if the scanned QR should be captured.\n   * @param qr - scanned QR content.\n   */\n  capture?: (qr: string) => boolean;\n}): CancelablePromise<string | undefined>;\n\n/**\n * Opens the scanner and calls the `onCaptured` function each time, a QR was\n * scanned.\n *\n * The function returns a promise which will be resolved when the QR scanner\n * was closed. It expects the scanner to be closed externally by a user or\n * via the `close` method.\n * @param options - method options.\n * @since Mini Apps v6.4\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_ALREADY_OPENED\n * @example\n * if (open.isAvailable()) {\n *   const promise = await open({\n *     text: 'Scan any QR',\n *     onCaptured(scannedQr) {\n *       if (scannedQr === 'any expected by me qr') {\n *         close();\n *       }\n *     }\n *   });\n *   console.log('The scanner was closed');\n * }\n */\nfunction _open(options: OpenSharedOptions & {\n  /**\n   * Function which will be called if a QR code was scanned.\n   * @param qr - scanned QR content.\n   */\n  onCaptured: (qr: string) => void;\n}): CancelablePromise<void>;\n\nfunction _open(options?: OpenSharedOptions & {\n  onCaptured?: (qr: string) => void;\n  capture?: (qr: string) => boolean;\n}): CancelablePromise<string | void> {\n  return CancelablePromise.withFn((abortSignal) => {\n    if (isOpened()) {\n      throw new TypedError(ERR_ALREADY_OPENED, 'The QR Scanner is already opened');\n    }\n    isOpened.set(true);\n\n    options ||= {};\n    const { onCaptured, text, capture } = options;\n    const [, cleanup] = createCbCollector(\n      // Whenever the scanner was closed for some reason (by a developer or a\n      // user), we should resolve the promise with undefined.\n      isOpened.sub(() => {\n        promise.resolve();\n      }),\n      // Whenever user closed the scanner, update the isOpened signal state.\n      on(CLOSED_EVENT, () => {\n        isOpened.set(false);\n      }),\n      // Whenever some QR was scanned, we should check if it must be captured.\n      on(TEXT_RECEIVED_EVENT, (event) => {\n        if (onCaptured) {\n          onCaptured(event.data);\n        } else if (!capture || capture(event.data)) {\n          promise.resolve(event.data);\n          close();\n        }\n      }),\n    );\n\n    const promise = new EnhancedPromise<string | void>({ abortSignal })\n      .catch(close)\n      .finally(cleanup);\n\n    (options.postEvent || postEvent)(OPEN_METHOD, { text });\n\n    return promise;\n  }, options);\n}\n\nexport const open = wrapSupported('open', _open);", "import { computed, type Computed, signal } from '@telegram-apps/signals';\n\nimport { buttonColor } from '@/scopes/components/theme-params/signals.js';\nimport { bottomBarColorRGB } from '@/scopes/components/mini-app/signals.js';\n\nimport type { State } from './types.js';\n\nfunction fromState<K extends keyof Required<State>>(key: K): Computed<Required<State>[K]> {\n  return computed(() => state()[key]);\n}\n\nexport const internalState = signal<State>({\n  hasShineEffect: false,\n  isEnabled: true,\n  isLoaderVisible: false,\n  isVisible: false,\n  position: 'left',\n  text: 'Cancel',\n});\n\n/**\n * Complete component state.\n */\nexport const state = computed<Required<State>>(() => {\n  const s = internalState();\n  return {\n    ...s,\n    backgroundColor: s.backgroundColor || bottomBarColorRGB() || '#000000',\n    textColor: s.textColor || buttonColor() || '#2481cc',\n  };\n});\n\n/**\n * True if the component is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * @see State.backgroundColor\n */\nexport const backgroundColor = fromState('backgroundColor');\n\n/**\n * @see State.hasShineEffect\n */\nexport const hasShineEffect = fromState('hasShineEffect');\n\n/**\n * @see State.isEnabled\n */\nexport const isEnabled = fromState('isEnabled');\n\n/**\n * @see State.isLoaderVisible\n */\nexport const isLoaderVisible = fromState('isLoaderVisible');\n\n/**\n * @see State.isVisible\n */\nexport const isVisible = fromState('isVisible');\n\n/**\n * @see State.position\n */\nexport const position = fromState('position');\n\n/**\n * @see State.text\n */\nexport const text = fromState('text');\n\n/**\n * @see State.textColor\n */\nexport const textColor = fromState('textColor');\n", "import {\n  off,\n  on,\n  getStorageValue,\n  setStorageValue,\n  type EventListener,\n} from '@telegram-apps/bridge';\nimport { isPageReload } from '@telegram-apps/navigation';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { createIsSupported } from '@/scopes/toolkit/createIsSupported.js';\nimport { createWrapComplete } from '@/scopes/toolkit/createWrapComplete.js';\nimport { createWrapSupported } from '@/scopes/toolkit/createWrapSupported.js';\n\nimport { internalState, isMounted, state } from './signals.js';\nimport type { State } from './types.js';\n\ntype StorageValue = State;\n\nconst SETUP_METHOD_NAME = 'web_app_setup_secondary_button';\nconst CLICK_EVENT_NAME = 'secondary_button_pressed';\nconst COMPONENT_NAME = 'secondaryButton';\n\nconst wrapSupported = createWrapSupported(COMPONENT_NAME, SETUP_METHOD_NAME);\nconst wrapComplete = createWrapComplete(COMPONENT_NAME, isMounted, SETUP_METHOD_NAME);\n\n/**\n * Signal indicating if the Secondary Button is supported.\n */\nexport const isSupported = createIsSupported(SETUP_METHOD_NAME);\n\n/**\n * Mounts the Secondary Button restoring its state.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (mount.isAvailable()) {\n *   mount();\n * }\n */\nexport const mount = wrapSupported('mount', (): void => {\n  if (!isMounted()) {\n    const prev = isPageReload() && getStorageValue<StorageValue>(COMPONENT_NAME);\n    prev && internalState.set(prev);\n    isMounted.set(true);\n  }\n});\n\n/**\n * Adds a new Secondary Button click listener.\n * @param fn - event listener.\n * @returns A function to remove bound listener.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (onClick.isAvailable()) {\n *   const off = onClick(() => {\n *     console.log('User clicked the Secondary Button');\n *     off();\n *   });\n * }\n */\nexport const onClick = wrapSupported(\n  'onClick',\n  (fn: EventListener<'secondary_button_pressed'>): VoidFunction => on(CLICK_EVENT_NAME, fn),\n);\n\n/**\n * Removes the Secondary Button click listener.\n * @param fn - an event listener.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (offClick.isAvailable()) {\n *   function listener() {\n *     console.log('User clicked the Secondary Button');\n *     offClick(listener);\n *   }\n *   onClick(listener);\n * }\n */\nexport const offClick = wrapSupported(\n  'offClick',\n  (fn: EventListener<'secondary_button_pressed'>): void => {\n    off(CLICK_EVENT_NAME, fn);\n  },\n);\n\n/**\n * Updates the Secondary Button state.\n * @param updates - state changes to perform.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (setParams.isAvailable()) {\n *   setParams({\n *     text: 'Submit',\n *     isEnabled: true,\n *     isVisible: true,\n *     position: 'left',\n *   });\n * }\n */\nexport const setParams = wrapComplete(\n  'setParams',\n  (updates: Partial<State>): void => {\n    internalState.set({\n      ...internalState(),\n      ...Object.fromEntries(\n        Object.entries(updates).filter(([, v]) => v !== undefined),\n      ),\n    });\n    setStorageValue<StorageValue>(COMPONENT_NAME, internalState());\n\n    // We should not commit changes until the payload is correct. Some version of Telegram will\n    // crash due to the empty value of the text.\n    const s = state();\n    s.text && postEvent(SETUP_METHOD_NAME, {\n      color: s.backgroundColor,\n      has_shine_effect: s.hasShineEffect,\n      is_active: s.isEnabled,\n      is_progress_visible: s.isLoaderVisible,\n      is_visible: s.isVisible,\n      position: s.position,\n      text: s.text,\n      text_color: s.textColor,\n    });\n  },\n);\n\n/**\n * Unmounts the Secondary Button.\n *\n * Note that this function does not remove listeners added via the `onClick`\n * function, so you have to remove them on your own.\n * @see onClick\n */\nexport function unmount(): void {\n  isMounted.set(false);\n}", "import {\n  off,\n  on,\n  getStorageValue,\n  setStorageValue,\n  type EventListener,\n} from '@telegram-apps/bridge';\nimport { signal } from '@telegram-apps/signals';\nimport { isPageReload } from '@telegram-apps/navigation';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { createIsSupported } from '@/scopes/toolkit/createIsSupported.js';\nimport { createWrapComplete } from '@/scopes/toolkit/createWrapComplete.js';\nimport {\n  createWrapSupported\n} from '@/scopes/toolkit/createWrapSupported.js';\n\ntype StorageValue = boolean;\n\nconst SETUP_METHOD_NAME = 'web_app_setup_settings_button';\nconst CLICK_EVENT_NAME = 'settings_button_pressed';\nconst COMPONENT_NAME = 'settingsButton';\n\n/**\n * Signal indicating if the Settings Button is currently visible.\n */\nexport const isVisible = signal(false);\n\n/**\n * Signal indicating if the Settings Button is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * Signal indicating if the Settings Button is supported.\n */\nexport const isSupported = createIsSupported(SETUP_METHOD_NAME);\n\nconst wrapSupported = createWrapSupported(COMPONENT_NAME, SETUP_METHOD_NAME);\nconst wrapComplete = createWrapComplete(COMPONENT_NAME, isMounted, SETUP_METHOD_NAME);\n\n/**\n * Hides the Settings Button.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @since Mini Apps v6.10\n * @example\n * if (hide.isAvailable()) {\n *   hide();\n * }\n */\nexport const hide = wrapComplete('hide', (): void => {\n  setVisibility(false);\n});\n\n/**\n * Mounts the Settings Button restoring its state.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @since Mini Apps v6.10\n * @example\n * if (mount.isAvailable()) {\n *   mount();\n * }\n */\nexport const mount = wrapSupported('mount', (): void => {\n  if (!isMounted()) {\n    setVisibility(isPageReload() && getStorageValue<StorageValue>(COMPONENT_NAME) || false);\n    isMounted.set(true);\n  }\n});\n\nfunction setVisibility(value: boolean): void {\n  if (value !== isVisible()) {\n    postEvent(SETUP_METHOD_NAME, { is_visible: value });\n    setStorageValue<StorageValue>(COMPONENT_NAME, value);\n    isVisible.set(value);\n  }\n}\n\n/**\n * Adds a new Settings Button click listener.\n * @param fn - event listener.\n * @returns A function to remove bound listener.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @since Mini Apps v6.10\n * @example\n * if (onClick.isAvailable()) {\n *   const off = onClick(() => {\n *     console.log('User clicked the Settings Button');\n *     off();\n *   });\n * }\n */\nexport const onClick = wrapSupported(\n  'onClick',\n  (fn: EventListener<'settings_button_pressed'>): VoidFunction => on(CLICK_EVENT_NAME, fn),\n);\n\n/**\n * Removes the Settings Button click listener.\n * @param fn - an event listener.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @since Mini Apps v6.10\n * @example\n * if (offClick.isAvailable()) {\n *   function listener() {\n *     console.log('User clicked the Settings Button');\n *     offClick(listener);\n *   }\n *   onClick(listener);\n * }\n */\nexport const offClick = wrapSupported(\n  'offClick',\n  (fn: EventListener<'settings_button_pressed'>): void => {\n    off(CLICK_EVENT_NAME, fn);\n  },\n);\n\n/**\n * Shows the Settings Button.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @since Mini Apps v6.10\n * @example\n * if (show.isAvailable()) {\n *   show();\n * }\n */\nexport const show = wrapComplete('show', (): void => {\n  setVisibility(true);\n});\n\n/**\n * Unmounts the Settings Button.\n *\n * Note that this function does not remove listeners added via the `onClick`\n * function, so you have to remove them on your own.\n * @see onClick\n */\nexport function unmount(): void {\n  isMounted.set(false);\n}\n", "import { isPageReload } from '@telegram-apps/navigation';\nimport { getStorageValue, setStorageValue } from '@telegram-apps/bridge';\nimport { signal } from '@telegram-apps/signals';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { createIsSupported } from '@/scopes/toolkit/createIsSupported.js';\nimport { createWrapComplete } from '@/scopes/toolkit/createWrapComplete.js';\nimport {\n  createWrapSupported\n} from '@/scopes/toolkit/createWrapSupported.js';\n\ntype StorageValue = boolean;\n\nconst SETUP_METHOD_NAME = 'web_app_setup_swipe_behavior';\nconst COMPONENT_NAME = 'swipeBehavior';\n\n/**\n * Signal indicating if the Swipe Behavior component is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * Signal indicating if the Swipe Behavior is supported.\n */\nexport const isSupported = createIsSupported(SETUP_METHOD_NAME);\n\n/**\n * Signal indicating if vertical swipes are enabled.\n */\nexport const isVerticalEnabled = signal(true);\n\nconst wrapSupported = createWrapSupported(COMPONENT_NAME, SETUP_METHOD_NAME);\nconst wrapComplete = createWrapComplete(COMPONENT_NAME, isMounted, SETUP_METHOD_NAME);\n\n/**\n * Disables vertical swipes.\n * @since Mini Apps v7.7\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @example\n * if (disableVertical.isAvailable()) {\n *   disableVertical();\n * }\n */\nexport const disableVertical = wrapComplete('disableVertical', (): void => {\n  setVerticalEnabled(false);\n});\n\n/**\n * Enables vertical swipes.\n * @since Mini Apps v7.7\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @example\n * if (enableVertical.isAvailable()) {\n *   enableVertical();\n * }\n */\nexport const enableVertical = wrapComplete('enableVertical', (): void => {\n  setVerticalEnabled(true);\n});\n\n/**\n * Mounts the Swipe Behavior component restoring its state.\n * @since Mini Apps v7.7\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (mount.isAvailable()) {\n *   mount();\n * }\n */\nexport const mount = wrapSupported('mount', (): void => {\n  if (!isMounted()) {\n    setVerticalEnabled(\n      isPageReload() && getStorageValue<StorageValue>(COMPONENT_NAME) || false,\n      true,\n    );\n    isMounted.set(true);\n  }\n});\n\nfunction setVerticalEnabled(value: boolean, force?: boolean): void {\n  if (value !== isVerticalEnabled() || force) {\n    postEvent(SETUP_METHOD_NAME, { allow_vertical_swipe: value });\n    setStorageValue<StorageValue>(COMPONENT_NAME, value);\n    isVerticalEnabled.set(value);\n  }\n}\n\n/**\n * Unmounts the Swipe Behavior component.\n */\nexport function unmount(): void {\n  isMounted.set(false);\n}\n", "import { computed, type Computed, signal } from '@telegram-apps/signals';\n\nimport type { State } from './types.js';\n\n/* USUAL */\n\n/**\n * Complete component state.\n */\nexport const state = signal<State>({\n  height: 0,\n  width: 0,\n  isExpanded: false,\n  stableHeight: 0,\n});\n\n/**\n * True if the component is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * True if CSS variables are currently bound.\n */\nexport const isCssVarsBound = signal(false);\n\n/**\n * True if the component is currently mounting.\n */\nexport const isMounting = signal<boolean>(false);\n\n/**\n * Error occurred while mounting the component.\n */\nexport const mountError = signal<Error | undefined>(undefined);\n\n/* COMPUTED */\n\nfunction createStateComputed<K extends keyof State>(key: K): Computed<State[K] | undefined> {\n  return computed(() => state()[key]);\n}\n\n/**\n * The current height of the **visible area** of the Mini App.\n *\n * The application can display just the top part of the Mini App, with its lower part remaining\n * outside the screen area. From this position, the user can \"pull\" the Mini App to its\n * maximum height, while the bot can do the same by calling `expand` method. As the position of\n * the Mini App changes, the current height value of the visible area will be updated  in real\n * time.\n *\n * Please note that the refresh rate of this value is not sufficient to smoothly follow the\n * lower border of the window. It should not be used to pin interface elements to the bottom\n * of the visible area. It's more appropriate to use the value of the `stableHeight`\n * field for this purpose.\n *\n * @see stableHeight\n */\nexport const height = createStateComputed('height');\n\n/**\n * True if the Mini App is expanded to the maximum available height. Otherwise, if\n * the Mini App occupies part of the screen and can be expanded to the full height using\n * `expand` method.\n * @see expand\n */\nexport const isExpanded = createStateComputed('isExpanded');\n\n/**\n * True if the current viewport height is stable and is not going to change in the next moment.\n */\nexport const isStable = computed(() => {\n  const s = state();\n  return s.height === s.stableHeight;\n});\n\n/**\n * The height of the visible area of the Mini App in its last stable state.\n *\n * The application can display just the top part of the Mini App, with its lower part remaining\n * outside the screen area. From this position, the user can \"pull\" the Mini App to its\n * maximum height, while the application can do the same by calling `expand` method.\n *\n * Unlike the value of `height`, the value of `stableHeight` does not change as the position\n * of the Mini App changes with user gestures or during animations. The value of `stableHeight`\n * will be updated after all gestures and animations are completed and the Mini App reaches its\n * final size.\n *\n * @see height\n */\nexport const stableHeight = createStateComputed('stableHeight');\n\n/**\n * Currently visible area width.\n */\nexport const width = createStateComputed('width');", "import type {\n  ExecuteWithOptions,\n  CancelablePromise,\n} from '@telegram-apps/bridge';\n\nimport { request as _request } from '@/scopes/globals.js';\n\nexport interface RequestViewportResult {\n  height: number;\n  isExpanded: boolean;\n  isStable: boolean;\n  width: number;\n}\n\n/**\n * Requests viewport actual information from the Telegram application.\n * @param options - request options.\n * @example\n * const viewport = await request({\n *   timeout: 1000\n * });\n */\nexport function requestViewport(\n  options?: ExecuteWithOptions,\n): CancelablePromise<RequestViewportResult> {\n  return _request('web_app_request_viewport', 'viewport_changed', options).then(r => ({\n    height: r.height,\n    width: r.width,\n    isExpanded: r.is_expanded,\n    isStable: r.is_state_stable,\n  }));\n}\n", "import {\n  off,\n  on,\n  retrieveLaunchParams,\n  camelToKebab,\n  getStorageValue,\n  setStorageValue,\n  deleteCssVar,\n  setCssVar,\n  type EventListener,\n} from '@telegram-apps/bridge';\nimport { isPageReload } from '@telegram-apps/navigation';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { createMountFn } from '@/scopes/createMountFn.js';\nimport { createWrapMounted } from '@/scopes/toolkit/createWrapMounted.js';\nimport { createWrapBasic } from '@/scopes/toolkit/createWrapBasic.js';\nimport { throwCssVarsBound } from '@/scopes/toolkit/throwCssVarsBound.js';\n\nimport { requestViewport } from './requestViewport.js';\nimport {\n  state,\n  mountError,\n  isMounted,\n  isCssVarsBound,\n  isMounting,\n} from './signals.js';\nimport type { GetCSSVarNameFn } from './types.js';\nimport type { State } from './types.js';\n\ninterface StorageValue {\n  height: number;\n  isExpanded: boolean;\n  stableHeight: number;\n  width: number;\n}\n\nconst COMPONENT_NAME = 'viewport';\nconst wrapBasic = createWrapBasic(COMPONENT_NAME);\nconst wrapMounted = createWrapMounted(COMPONENT_NAME, isMounted);\n\n/**\n * Creates CSS variables connected with the current viewport.\n *\n * By default, created CSS variables names are following the pattern \"--tg-theme-{name}\", where\n * {name} is a theme parameters key name converted from camel case to kebab case.\n *\n * Default variables:\n * - `--tg-viewport-height`\n * - `--tg-viewport-width`\n * - `--tg-viewport-stable-height`\n *\n * Variables are being automatically updated if the viewport was changed.\n *\n * @param getCSSVarName - function, returning complete CSS variable name for the specified\n * viewport property.\n * @returns Function to stop updating variables.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_VARS_ALREADY_BOUND\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @example Using no arguments\n * if (bindCssVars.isAvailable()) {\n *   bindCssVars();\n * }\n * @example Using custom CSS vars generator\n * if (bindCssVars.isAvailable()) {\n *   bindCssVars(key => `--my-prefix-${key}`);\n * }\n */\nexport const bindCssVars = wrapMounted(\n  'bindCssVars',\n  (getCSSVarName?: GetCSSVarNameFn): VoidFunction => {\n    isCssVarsBound() && throwCssVarsBound();\n\n    getCSSVarName ||= (prop) => `--tg-viewport-${camelToKebab(prop)}`;\n    const props = ['height', 'width', 'stableHeight'] as const;\n\n    function actualize(): void {\n      props.forEach(prop => {\n        setCssVar(getCSSVarName!(prop), `${state()[prop]}px`);\n      });\n    }\n\n    actualize();\n    state.sub(actualize);\n    isCssVarsBound.set(true);\n\n    return () => {\n      props.forEach(deleteCssVar);\n      state.unsub(actualize);\n      isCssVarsBound.set(false);\n    };\n  },\n);\n\n/**\n * A method that expands the Mini App to the maximum available height. To find out if the Mini\n * App is expanded to the maximum height, refer to the value of the `isExpanded`.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @see isExpanded\n * @example\n * if (expand.isAvailable()) {\n *   expand();\n * }\n */\nexport const expand = wrapBasic('expand', (): void => {\n  postEvent('web_app_expand');\n});\n\n/**\n * Mounts the Viewport component.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_ALREADY_MOUNTING\n * @example\n * if (mount.isAvailable() && !isMounting()) {\n *   await mount();\n * }\n */\nexport const mount = wrapBasic(\n  'mount',\n  createMountFn<State>(\n    COMPONENT_NAME,\n    options => {\n      // Try to restore the state using the storage.\n      const s = isPageReload() && getStorageValue<StorageValue>(COMPONENT_NAME);\n      if (s) {\n        return s;\n      }\n\n      // If the platform has a stable viewport, it means we could use the window global object\n      // properties.\n      if ([\n        'macos',\n        'tdesktop',\n        'unigram',\n        'webk',\n        'weba',\n        'web',\n      ].includes(retrieveLaunchParams().platform)) {\n        const w = window;\n        return {\n          isExpanded: true,\n          height: w.innerHeight,\n          width: w.innerWidth,\n          stableHeight: w.innerHeight,\n        };\n      }\n\n      // We were unable to retrieve data locally. In this case, we are sending\n      // a request returning the viewport information.\n      options.timeout ||= 1000;\n      return requestViewport(options).then(data => ({\n        height: data.height,\n        isExpanded: data.isExpanded,\n        stableHeight: data.isStable ? data.height : state().stableHeight,\n        width: data.width,\n      }));\n    },\n    result => {\n      on('viewport_changed', onViewportChanged);\n      setState(result);\n    },\n    { isMounted, isMounting, mountError },\n  ),\n);\n\nconst onViewportChanged: EventListener<'viewport_changed'> = (data) => {\n  setState({\n    height: data.height,\n    isExpanded: data.is_expanded,\n    stableHeight: data.is_state_stable ? data.height : state().stableHeight,\n    width: data.width,\n  });\n};\n\nfunction setState(s: State) {\n  state.set({\n    isExpanded: s.isExpanded,\n    height: truncate(s.height),\n    width: truncate(s.width),\n    stableHeight: truncate(s.stableHeight),\n  });\n  setStorageValue<StorageValue>('viewport', state());\n}\n\n/**\n * Formats value to make it stay in bounds [0, +Inf).\n * @param value - value to format.\n */\nfunction truncate(value: number): number {\n  return Math.max(value, 0);\n}\n\n/**\n * Unmounts the Viewport.\n */\nexport function unmount(): void {\n  off('viewport_changed', onViewportChanged);\n  isMounted.set(false);\n}\n", "import { type OpenLinkBrowser, TypedError } from '@telegram-apps/bridge';\n\nimport { createWrapBasic } from '@/scopes/toolkit/createWrapBasic.js';\nimport { ERR_INVALID_URL } from '@/errors.js';\nimport { postEvent } from '@/scopes/globals.js';\n\nexport interface OpenLinkOptions {\n  /**\n   * Attempts to use the instant view mode.\n   */\n  tryInstantView?: boolean;\n  /**\n   * A preferred browser to open the link in.\n   */\n  tryBrowser?: OpenLinkBrowser;\n}\n\nconst wrapBasic = createWrapBasic();\n\n/**\n * Opens a link.\n *\n * The Mini App will not be closed.\n *\n * Note that this method can be called only in response to the user\n * interaction with the Mini App interface (e.g. click inside the Mini App or on the main button).\n * @param url - URL to be opened.\n * @param options - additional options.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_INVALID_URL\n * @example\n * if (openLink.isAvailable()) {\n *   openLink('https://google.com', {\n *     tryInstantView: true,\n *     tryBrowser: 'chrome',\n *   });\n * }\n */\nexport const openLink = wrapBasic(\n  'openLink',\n  (url: string | URL, options?: OpenLinkOptions): void => {\n    if (typeof url === 'string') {\n      try {\n        url = new URL(url);\n      } catch (e) {\n        throw new TypedError(ERR_INVALID_URL, `\"${url.toString()}\" is invalid URL`, e);\n      }\n    }\n    options ||= {};\n    postEvent('web_app_open_link', {\n      url: url.toString(),\n      try_browser: options.tryBrowser,\n      try_instant_view: options.tryInstantView,\n    });\n  },\n);", "import { supports, TypedError } from '@telegram-apps/bridge';\n\nimport { createWrapBasic } from '@/scopes/toolkit/createWrapBasic.js';\nimport { ERR_INVALID_URL } from '@/errors.js';\nimport { $version, postEvent } from '@/scopes/globals.js';\n\nconst OPEN_TG_LINK_METHOD = 'web_app_open_tg_link';\nconst wrapBasic = createWrapBasic();\n\n/**\n * Opens a Telegram link inside the Telegram app. The function expects passing a link in a full\n * format using the hostname \"t.me\".\n *\n * The Mini App will be closed.\n * @param url - URL to be opened.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_INVALID_URL\n * @example\n * if (openTelegramLink.isAvailable()) {\n *   openTelegramLink('https://t.me/heyqbnk');\n * }\n */\nexport const openTelegramLink = wrapBasic(\n  'openTelegramLink',\n  (url: string | URL): void => {\n    const urlString = url.toString();\n    if (!urlString.match(/^https:\\/\\/t.me\\/.+/)) {\n      throw new TypedError(ERR_INVALID_URL, `\"${urlString}\" is invalid URL`);\n    }\n\n    if (!supports(OPEN_TG_LINK_METHOD, $version())) {\n      window.location.href = urlString;\n      return;\n    }\n\n    url = new URL(url);\n    postEvent(OPEN_TG_LINK_METHOD, { path_full: url.pathname + url.search });\n  },\n);", "import { createWrapBasic } from '@/scopes/toolkit/createWrapBasic.js';\nimport { openTelegramLink } from '@/scopes/utilities/links/openTelegramLink.js';\n\nconst wrapBasic = createWrapBasic();\n\n/**\n * Shares the specified URL with the passed to the chats, selected by user.\n * After being called, it closes the mini application.\n *\n * This method uses Telegram's Share Links.\n * @param url - URL to share.\n * @param text - text to append after the URL.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @see https://core.telegram.org/api/links#share-links\n * @see https://core.telegram.org/widgets/share#custom-buttons\n */\nexport const shareURL = wrapBasic(\n  'shareURL',\n  (url: string, text?: string): void => {\n    openTelegramLink(\n      `https://t.me/share/url?` + new URLSearchParams({ url, text: text || '' })\n        .toString()\n        // By default, URL search params encode spaces with \"+\".\n        // We are replacing them with \"%20\", because plus symbols are working incorrectly\n        // in Telegram.\n        .replace(/\\+/g, '%20'),\n    );\n  },\n);\n", "import { signal } from '@telegram-apps/signals';\nimport { type AsyncOptions, type PhoneRequestedStatus, TypedError } from '@telegram-apps/bridge';\n\nimport { ERR_ALREADY_REQUESTING } from '@/errors.js';\nimport { request } from '@/scopes/globals.js';\nimport { wrapSafe } from '@/scopes/toolkit/wrapSafe.js';\n\nexport const REQUEST_PHONE_METHOD = 'web_app_request_phone';\n\n/**\n * Signal indicating if phone access is currently being requested.\n */\nexport const isRequestingPhoneAccess = signal(false);\n\n/**\n * Requests current user phone access. Method returns promise, which resolves\n * status of the request. In case, user accepted the request, Mini App bot will receive\n * the according notification.\n *\n * To obtain the retrieved information instead, utilize the `requestContact` method.\n * @param options - additional options.\n * @since Mini Apps v6.9\n * @see requestContact\n * @throws {TypedError} ERR_ALREADY_REQUESTING\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (requestPhoneAccess.isAvailable()) {\n *   const status = await requestPhoneAccess();\n * }\n */\nexport const requestPhoneAccess = wrapSafe(\n  'requestPhoneAccess',\n  (options?: AsyncOptions): Promise<PhoneRequestedStatus> => {\n    if (isRequestingPhoneAccess()) {\n      throw new TypedError(ERR_ALREADY_REQUESTING, 'Phone access request is currently in progress');\n    }\n    isRequestingPhoneAccess.set(true);\n\n    return request(REQUEST_PHONE_METHOD, 'phone_requested', options)\n      .then(r => r.status)\n      .finally(() => {\n        isRequestingPhoneAccess.set(false);\n      });\n  },\n  {\n    isSupported: REQUEST_PHONE_METHOD,\n  },\n);", "import {\n  type AsyncOptions,\n  CancelablePromise,\n  sleep,\n  TypedError,\n} from '@telegram-apps/bridge';\nimport { date, number, object, searchParams, string } from '@telegram-apps/transformers';\n\nimport { wrapSafe } from '@/scopes/toolkit/wrapSafe.js';\nimport { invokeCustomMethod } from '@/scopes/globals.js';\nimport { ERR_ACCESS_DENIED } from '@/errors.js';\n\nimport { REQUEST_PHONE_METHOD, requestPhoneAccess } from './requestPhoneAccess.js';\n\n/**\n * Requested contact information.\n */\nexport interface RequestedContact {\n  contact: {\n    userId: number;\n    phoneNumber: string;\n    firstName: string;\n    lastName?: string;\n  };\n  authDate: Date;\n  hash: string;\n}\n\n/**\n * Attempts to get requested contact.\n * @param options - execution options.\n * @throws {TypedError} ERR_CUSTOM_METHOD_ERR_RESPONSE\n */\nfunction getRequestedContact(options?: AsyncOptions): CancelablePromise<RequestedContact> {\n  options ||= {};\n  return invokeCustomMethod('getRequestedContact', {}, {\n    ...options,\n    timeout: options.timeout || 5000,\n  })\n    .then(\n      searchParams({\n        contact: object({\n          userId: ['user_id', number()],\n          phoneNumber: ['phone_number', string()],\n          firstName: ['first_name', string()],\n          lastName: ['last_name', string(true)],\n        })(),\n        authDate: ['auth_date', date()],\n        hash: string(),\n      })(),\n    );\n}\n\n/**\n * Requests current user contact information. In contrary to requestPhoneAccess, this method\n * returns promise with contact information that rejects in case, user denied access, or request\n * failed.\n * @param options - additional options.\n * @since Mini Apps v6.9\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_ACCESS_DENIED\n * @throws {TypedError} ERR_CUSTOM_METHOD_ERR_RESPONSE\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (requestContact.isAvailable()) {\n *   const contact = await requestContact();\n * }\n */\nexport const requestContact = wrapSafe(\n  'requestContact',\n  (options?: AsyncOptions): CancelablePromise<RequestedContact> => {\n    return CancelablePromise.withFn(\n      async (abortSignal) => {\n        const asyncOptions = { abortSignal };\n\n        // First of all, let's try to get the requested contact.\n        // Probably, we already requested it before.\n        try {\n          return await getRequestedContact(asyncOptions);\n        } catch {\n        }\n\n        // Then, request access to the user's phone.\n        const status = await requestPhoneAccess(asyncOptions);\n        if (status !== 'sent') {\n          throw new TypedError(ERR_ACCESS_DENIED, 'User denied access');\n        }\n\n        // Time to wait before executing the next request.\n        let sleepTime = 50;\n\n        // We are trying to retrieve the requested contact until the deadline was reached.\n        while (!abortSignal.aborted) {\n          try {\n            return await getRequestedContact(asyncOptions);\n          } catch {\n          }\n\n          // Sleep for some time.\n          await sleep(sleepTime);\n\n          // Increase the sleep time not to kill the backend service.\n          sleepTime += 50;\n        }\n\n        // Reachable code, but the promise will be rejected and this result will be\n        // ignored.\n        return null as any;\n      }, options,\n    );\n  },\n  {\n    isSupported: REQUEST_PHONE_METHOD,\n  },\n);", "import {\n  TypedError,\n  type WriteAccessRequestedStatus,\n  type AsyncOptions,\n} from '@telegram-apps/bridge';\nimport { signal } from '@telegram-apps/signals';\n\nimport { request } from '@/scopes/globals.js';\nimport { ERR_ALREADY_REQUESTING } from '@/errors.js';\nimport { wrapSafe } from '@/scopes/toolkit/wrapSafe.js';\n\nconst REQUEST_WRITE_ACCESS_METHOD = 'web_app_request_write_access';\n\n/**\n * Signal indicating if write access is currently being requested.\n */\nexport const isRequestingWriteAccess = signal(false);\n\n/**\n * Requests write message access to the current user.\n * @param options - additional options.\n * @since Mini Apps v6.9\n * @throws {TypedError} ERR_ALREADY_REQUESTING\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (requestWriteAccess.isAvailable()) {\n *   const status = await requestWriteAccess();\n * }\n */\nexport const requestWriteAccess = wrapSafe(\n  'requestWriteAccess',\n  (options?: AsyncOptions): Promise<WriteAccessRequestedStatus> => {\n    if (isRequestingWriteAccess()) {\n      throw new TypedError(ERR_ALREADY_REQUESTING, 'Write access request is currently in progress');\n    }\n    isRequestingWriteAccess.set(true);\n\n    return request(REQUEST_WRITE_ACCESS_METHOD, 'write_access_requested', options)\n      .then(r => r.status)\n      .finally(() => {\n        isRequestingWriteAccess.set(false);\n      });\n  },\n  {\n    isSupported: REQUEST_WRITE_ACCESS_METHOD,\n  },\n);\n", "import type { AsyncOptions, CancelablePromise } from '@telegram-apps/bridge';\nimport { date } from '@telegram-apps/transformers';\n\nimport { invokeCustomMethod } from '@/scopes/globals.js';\nimport { wrapSafe } from '@/scopes/toolkit/wrapSafe.js';\n\n/**\n * @returns Current server time.\n * @param options - execution options.\n */\nexport const getCurrentTime = wrapSafe(\n  'getCurrentTime',\n  (options?: AsyncOptions): CancelablePromise<Date> => {\n    return invokeCustomMethod('getCurrentTime', {}, options).then(date());\n  },\n  {\n    isSupported: 'web_app_invoke_custom_method',\n  },\n);", "import { type AsyncOptions, type CancelablePromise, captureSameReq } from '@telegram-apps/bridge';\n\nimport { wrapSafe } from '@/scopes/toolkit/wrapSafe.js';\nimport { createRequestId, request } from '@/scopes/globals.js';\n\nconst READ_CLIPBOARD_METHOD = 'web_app_read_text_from_clipboard';\n\n/**\n * Reads a text from the clipboard and returns a `string` or `null`. `null` is returned\n * in cases:\n * - A value in the clipboard is not a text.\n * - Access to the clipboard is not granted.\n * @since Mini Apps v6.4\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (readTextFromClipboard.isAvailable()) {\n *   const value = await readTextFromClipboard();\n * }\n */\nexport const readTextFromClipboard = wrapSafe(\n  'readTextFromClipboard',\n  (options?: AsyncOptions): CancelablePromise<string | null> => {\n    const reqId = createRequestId();\n\n    return request(READ_CLIPBOARD_METHOD, 'clipboard_text_received', {\n      ...options,\n      params: { req_id: reqId },\n      capture: captureSameReq(reqId),\n    }).then(({ data = null }) => data);\n  },\n  {\n    isSupported: READ_CLIPBOARD_METHOD,\n  },\n);", "import { TypedError } from '@telegram-apps/bridge';\n\nimport { wrapSafe } from '@/scopes/toolkit/wrapSafe.js';\nimport { ERR_DATA_INVALID_SIZE } from '@/errors.js';\nimport { postEvent } from '@/scopes/globals.js';\n\n/**\n * Sends data to the bot.\n *\n * When this method called, a service message sent to the bot containing the data of the length\n * up to 4096 bytes, and the Mini App closed.\n *\n * See the field `web_app_data` in the class [Message](https://core.telegram.org/bots/api#message).\n *\n * This method is only available for Mini Apps launched via a Keyboard button.\n * @param data - data to send to bot.\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_DATA_INVALID_SIZE\n * @example\n * if (sendData.isAvailable()) {\n *   sendData('Here comes my data');\n * }\n */\nexport const sendData = wrapSafe(\n  'sendData',\n  (data: string): void => {\n    const { size } = new Blob([data]);\n    if (!size || size > 4096) {\n      throw new TypedError(ERR_DATA_INVALID_SIZE, size\n        ? 'Maximum size of data to send is 4096 bytes'\n        : 'Attempted to send empty data');\n    }\n    postEvent('web_app_data_send', { data });\n  },\n);", "import { wrapSafe } from '@/scopes/toolkit/wrapSafe.js';\nimport { postEvent } from '@/scopes/globals.js';\n\nconst SHARE_STORY_METHOD = 'web_app_share_to_story';\n\nexport interface ShareStoryOptions {\n  /**\n   * The caption to be added to the media.\n   * 0-200 characters for regular users and 0-2048 characters for premium subscribers.\n   * @see https://telegram.org/faq_premium#telegram-premium\n   */\n  text?: string;\n  /**\n   * An object that describes a widget link to be included in the story.\n   * Note that only premium subscribers can post stories with links.\n   * @see https://telegram.org/faq_premium#telegram-premium\n   */\n  widgetLink?: {\n    /**\n     * The URL to be included in the story.\n     */\n    url: string;\n    /**\n     * The name to be displayed for the widget link, 0-48 characters.\n     */\n    name?: string;\n  };\n}\n\n/**\n * Opens the native story editor.\n * @since Mini Apps v7.8\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @example\n * if (shareStory.isAvailable()) {\n *   shareStory('https://example.com/background.png', {\n *     text: 'Look at this cool group!',\n *     widgetLink: {\n *       url: 'https://t.me/heyqbnk',\n *       name: 'Vlad\\'s community',\n *     },\n *   });\n * }\n */\nexport const shareStory = wrapSafe(\n  'shareStory',\n  (mediaUrl: string, options?: ShareStoryOptions) => {\n    options ||= {};\n    postEvent(SHARE_STORY_METHOD, {\n      text: options.text,\n      media_url: mediaUrl,\n      widget_link: options.widgetLink,\n    });\n  },\n  { isSupported: SHARE_STORY_METHOD },\n);", "import { retrieveLaunchParams, type SwitchInlineQueryChatType } from '@telegram-apps/bridge';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { wrapSafe } from '@/scopes/toolkit/wrapSafe.js';\n\nconst SWITCH_INLINE_QUERY_METHOD = 'web_app_switch_inline_query';\n\n/**\n * Inserts the bot's username and the specified inline query in the current chat's input field.\n * Query may be empty, in which case only the bot's username will be inserted. The client prompts\n * the user to choose a specific chat, then opens that chat and inserts the bot's username and\n * the specified inline query in the input field.\n * @param query - text which should be inserted in the input after the current bot name. Max\n * length is 256 symbols.\n * @param chatTypes - List of chat types which could be chosen to send the message. Could be an\n * empty list.\n * @since Mini Apps v6.7\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @example\n * if (switchInlineQuery.isAvailable()) {\n *   switchInlineQuery('my query goes here', ['users']);\n * }\n */\nexport const switchInlineQuery = wrapSafe(\n  'switchInlineQuery',\n  (query: string, chatTypes?: SwitchInlineQueryChatType[]) => {\n    postEvent(SWITCH_INLINE_QUERY_METHOD, {\n      query: query,\n      chat_types: chatTypes || [],\n    });\n  },\n  {\n    isSupported: [SWITCH_INLINE_QUERY_METHOD, {\n      fn: () => !!retrieveLaunchParams().botInline,\n      error: 'Mini App should be ran in Bot inline mode',\n    }],\n  },\n);\n", "export type SafeCallResult<T, E> =\n  | { result: T }\n  | { error: E }\n\n/**\n * Calls the function and prevents it from throwing error. It returns an object\n * with one of two properties: `result` or `error`.\n *\n * You can use this function to safely execute any other function.\n * @param fn - function to call.\n */\nexport function safeCall<T, E = unknown>(fn: () => T): SafeCallResult<T, E> {\n  try {\n    return { result: fn() };\n  } catch (error) {\n    return { error: error as E };\n  }\n}\n", "import {\n  createCbCollector,\n  defineEventHandlers,\n  on,\n  removeEventHandlers,\n} from '@telegram-apps/bridge';\n\nimport { postEvent, configure, type ConfigureOptions } from '@/scopes/globals.js';\n\nexport interface InitOptions extends ConfigureOptions {\n  /**\n   * True if SDK should accept styles sent from the Telegram application.\n   * @default true\n   */\n  acceptCustomStyles?: boolean;\n}\n\n/**\n * Initializes the SDK allowing it to properly handle events, sent from the native Telegram\n * application.\n * @param options - function options.\n * @returns A function, to perform a cleanup.\n */\nexport function init(options?: InitOptions): VoidFunction {\n  // Configure the package global dependencies.\n  configure(options);\n\n  // Define event handlers, so we could receive the events from the Telegram application.\n  defineEventHandlers();\n\n  const [addCleanup, cleanup] = createCbCollector(\n    on('reload_iframe', () => {\n      postEvent('iframe_will_reload');\n      window.location.reload();\n    }),\n    removeEventHandlers,\n  );\n\n  const { acceptCustomStyles = true } = options || {};\n  if (acceptCustomStyles) {\n    const style = document.createElement('style');\n    style.id = 'telegram-custom-styles';\n    document.head.appendChild(style);\n\n    addCleanup(\n      on('set_custom_style', html => {\n        // It is safe to use innerHTML here as long as style tag has a special behavior related\n        // to the specified content.\n        // In case any script will be passed here, it will not be executed, so XSS is not possible.\n        style.innerHTML = html;\n      }),\n      () => {\n        document.head.removeChild(style);\n      },\n    );\n  }\n\n  // Notify Telegram that the application is ready.\n  //\n  // This will result in sending style tag html content from the Telegram web application.\n  // We should call this method also to start receiving \"reload_iframe\" events from the Telegram\n  // application.\n  //\n  // It really has no effect outside non-Telegram web environment.\n  postEvent('iframe_ready', { reload_supported: true });\n\n  return cleanup;\n}"],
  "mappings": "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",
  "names": ["i", "e", "r", "a", "b", "t", "E", "R", "S", "w", "h", "y", "n", "o", "c", "p", "d", "s", "l", "f", "A", "u", "g", "D", "P", "m", "U", "N", "O", "W", "_", "T", "V", "j", "I", "B", "classNames", "values", "value", "isRecord", "entry", "mergeClassNames", "partials", "acc", "partial", "key", "className", "v", "H", "G", "we", "he", "de", "me", "K", "Z", "$", "Ee", "z", "ye", "ve", "Pe", "Re", "Te", "Se", "X", "Ae", "$e", "Y", "Q", "Ne", "Ce", "ee", "De", "Ue", "je", "te", "x", "L", "xe", "ne", "re", "oe", "M", "ot", "st", "at", "q", "ge", "F", "it", "se", "ke", "Le", "ct", "We", "ft", "_t", "Oe", "Ie", "ae", "Me", "qe", "Fe", "C", "ie", "ce", "Je", "Be", "He", "Ge", "Ke", "Ve", "ue", "pe", "fe", "_e", "Ze", "ze", "Xe", "Ye", "le", "be", "Qe", "lt", "k", "et", "bt", "gt", "wt", "ht", "dt", "mt", "tt", "J", "nt", "Et", "yt", "$createRequestId", "signal", "requestId", "$postEvent", "_postEvent", "$version", "configure", "options", "optionsPostEvent", "retrieveLaunchParams", "createPostEvent", "createRequestId", "invokeCustomMethod", "method", "params", "_invokeCustomMethod", "postEvent", "request", "eventOrEvents", "_request", "createIsSupported", "computed", "supports", "ERR_POPUP_INVALID_PARAMS", "ERR_INVALID_URL", "ERR_INVALID_SLUG", "ERR_DATA_INVALID_SIZE", "ERR_ACCESS_DENIED", "ERR_ALREADY_REQUESTING", "ERR_ALREADY_OPENED", "ERR_ALREADY_MOUNTING", "ERR_CSS_VARS_ALREADY_BOUND", "ERR_NOT_AVAILABLE", "ERR_NOT_INITIALIZED", "ERR_NOT_SUPPORTED", "ERR_NOT_MOUNTED", "isSSR", "wrapSafe", "fn", "isSupported", "isMounted", "component", "supportsOption", "fullName", "isOptionSupported", "option", "tuple", "supportError", "defaultErr", "getError", "item", "err", "lastErr", "supportsOptionError", "args", "$isSupported", "$isInitialized", "$isMounted", "$isAvailable", "isTMA", "supportsMap", "errMessagePrefix", "TypedError", "ERR_UNKNOWN_ENV", "supportErr", "supportsOptionErr", "createWrapSafe", "overrideIsSupported", "createWrapComplete", "createWrapSupported", "SETUP_METHOD_NAME", "CLICK_EVENT_NAME", "COMPONENT_NAME", "isVisible", "wrapComplete", "wrapSupported", "hide", "setVisibility", "mount", "isPageReload", "getStorageValue", "setStorageValue", "onClick", "on", "offClick", "off", "show", "unmount", "createMountFn", "onMounted", "isMounting", "mountError", "mountOptions", "CancelablePromise", "abortSignal", "result", "batch", "error", "createWrapBasic", "state", "isAuthenticating", "isRequestingAccess", "isAvailable", "eventToState", "event", "GET_INFO_METHOD", "requestBiometry", "REQUEST_AUTH_METHOD", "REQUEST_ACCESS_METHOD", "OPEN_SETTINGS_METHOD", "UPDATE_TOKEN_METHOD", "INFO_RECEIVED_EVENT", "wrapBasic", "throwNotAvailable", "authenticate", "response", "token", "setState", "openSettings", "requestAccess", "info", "onBiometryInfoReceived", "updateToken", "createWrapMounted", "isConfirmationEnabled", "wrapMounted", "disableConfirmation", "setClosingConfirmation", "enableConfirmation", "INVOKE_METHOD_NAME", "deleteItem", "keyOrKeys", "keys", "_getItem", "data", "object", "string", "getItem", "getKeys", "array", "setItem", "HAPTIC_METHOD_NAME", "impactOccurred", "style", "notificationOccurred", "type", "selectionChanged", "fromState", "authDate", "canSendAfter", "canSendAfterDate", "authDateValue", "canSendAfterValue", "chat", "chatType", "chatInstance", "hash", "queryId", "raw", "receiver", "restore", "lp", "startParam", "user", "parseInitData", "initData", "OPEN_METHOD", "isOpened", "_open", "urlOrSlug", "optionsOrType", "slug", "hostname", "pathname", "match", "open", "isColorDark", "color", "rgb", "toRGB", "modifier", "idx", "dec", "isCssVarsBound", "accentTextColor", "backgroundColor", "buttonColor", "buttonTextColor", "bottomBarBgColor", "destructiveTextColor", "headerBackgroundColor", "hintColor", "isDark", "bgColor", "linkColor", "secondaryBackgroundColor", "sectionBackgroundColor", "sectionHeaderTextColor", "sectionSeparatorColor", "subtitleTextColor", "textColor", "internalState", "hasShineEffect", "isEnabled", "isLoaderVisible", "text", "prev", "setParams", "updates", "throwCssVarsBound", "parseThemeParams", "themeParams", "THEME_CHANGED_EVENT", "bindCssVars", "getCSSVarName", "prop", "camelToKebab", "forEachEntry", "actualize", "setCssVar", "deleteCssVar", "onThemeChanged", "rgbBasedOn", "isRGB", "themeBgColor", "themeSecondaryBgColor", "backgroundColorRGB", "bottomBarColor", "bottomBarColorRGB", "themeBottomBarBgColor", "headerColor", "headerColorRGB", "SET_BG_COLOR_METHOD", "SET_BOTTOM_BAR_COLOR_METHOD", "SET_HEADER_COLOR_METHOD", "isSupportedSchema", "addCleanup", "cleanup", "createCbCollector", "bind", "cssVar", "update", "close", "returnBack", "tpMount", "setBackgroundColor", "setBottomBarColor", "setHeaderColor", "ready", "saveState", "prepareParams", "message", "title", "buttons", "id", "buttonId", "CLOSE_METHOD", "CLOSED_EVENT", "TEXT_RECEIVED_EVENT", "onCaptured", "capture", "promise", "EnhancedPromise", "position", "isVerticalEnabled", "disableVertical", "setVerticalEnabled", "enableVertical", "force", "createStateComputed", "height", "isExpanded", "isStable", "stableHeight", "width", "requestViewport", "props", "expand", "onViewportChanged", "truncate", "openLink", "url", "OPEN_TG_LINK_METHOD", "openTelegramLink", "urlString", "shareURL", "REQUEST_PHONE_METHOD", "isRequestingPhoneAccess", "requestPhoneAccess", "getRequestedContact", "searchParams", "number", "date", "requestContact", "asyncOptions", "sleepTime", "sleep", "REQUEST_WRITE_ACCESS_METHOD", "isRequestingWriteAccess", "requestWriteAccess", "getCurrentTime", "READ_CLIPBOARD_METHOD", "readTextFromClipboard", "reqId", "captureSameReq", "sendData", "size", "SHARE_STORY_METHOD", "shareStory", "mediaUrl", "SWITCH_INLINE_QUERY_METHOD", "switchInlineQuery", "query", "chatTypes", "safeCall", "init", "defineEventHandlers", "removeEventHandlers", "acceptCustomStyles", "html"]
}
